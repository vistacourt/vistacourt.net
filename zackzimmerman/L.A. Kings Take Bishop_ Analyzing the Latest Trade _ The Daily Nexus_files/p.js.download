!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a,d){!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof d?e=d:"undefined"!=typeof self&&(e=self),e.Promise=a()}}(function(){var b,c,e;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(b,c,d){"use strict";function e(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new k(16),this._normalQueue=new k(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=j}function f(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function g(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function h(a){this._normalQueue._pushOne(a),this._queueTick()}var i;try{throw new Error}catch(a){i=a}var j=b("./schedule"),k=b("./queue"),l=b("./util");e.prototype.setScheduler=function(a){var b=this._schedule;return this._schedule=a,this._customScheduler=!0,b},e.prototype.hasCustomScheduler=function(){return this._customScheduler},e.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},e.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},e.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},e.prototype.fatalError=function(b,c){c?(a.stderr.write("Fatal "+(b instanceof Error?b.stack:b)+"\n"),a.exit(2)):this.throwLater(b)},e.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(a){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(e.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},e.prototype.invoke=function(a,b,c){this._trampolineEnabled?g.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},e.prototype.settlePromises=function(a){this._trampolineEnabled?h.call(this,a):this._schedule(function(){a._settlePromises()})}):(e.prototype.invokeLater=f,e.prototype.invoke=g,e.prototype.settlePromises=h),e.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},e.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},e.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},e.prototype._reset=function(){this._isTickUsed=!1},c.exports=e,c.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0===(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=this._bitField&-2097153},a.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise")();f.noConflict=d,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){var b=this.pop(),d=c(a,b);return d.apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return b<0&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(d,void 0,void 0,b,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype.break=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a._isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),a._setWillBeCancelled(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function c(a,c,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return f(c).call(j,i)}else if("function"==typeof l){var m=f(l).call(j,i);if(m===g)return m;if(m)return f(c).call(j,i)}else if(d.isObject(i)){for(var n=e(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return f(c).call(j,i)}}return b}}var d=a("./util"),e=a("./es5").keys,f=d.tryCatch,g=d.errorObj;return c}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){this._trace=new b.CapturedTrace(d())}function c(){if(e)return new b}function d(){var a=f.length-1;if(a>=0)return f[a]}var e=!1,f=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},b.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},b.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},b.CapturedTrace=null,b.create=c,b.deactivateLongStackTraces=function(){},b.activateLongStackTraces=function(){var c=a.prototype._pushContext,f=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;b.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=f,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,e=!1},e=!0,a.prototype._pushContext=b.prototype._pushContext,a.prototype._popContext=b.prototype._popContext,a._peekContext=a.prototype._peekContext=d,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},b}},{}],9:[function(b,c,d){"use strict";c.exports=function(c,d){function e(a,b){return{promise:b}}function f(){return!1}function g(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+N.toString(a));d._attachCancellationCallback(a)})}catch(a){return a}}function h(a){if(!this._isCancellable())return this;var b=this._onCancel();void 0!==b?N.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function i(){return this._onCancelField}function j(a){this._onCancelField=a}function k(){this._cancellationParent=void 0,this._onCancelField=void 0}function l(a,b){if(0!==(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function m(a,b){0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function n(){var a=this._boundTo;return void 0!==a&&a instanceof c?a.isFulfilled()?a.value():void 0:a}function o(){this._trace=new G(this._peekContext())}function p(a,b){if(O(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=y(a);N.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),N.notEnumerableProp(a,"__stackCleaned__",!0)}}}function q(a,b,c,d,e){if(void 0===a&&null!==b&&Y){if(void 0!==e&&e._returnedNonUndefined())return;if(0===(65535&d._bitField))return;c&&(c+=" ");var f="",g="";if(b._trace){for(var h=b._trace.stack.split("\n"),i=w(h),j=i.length-1;j>=0;--j){var k=i[j];if(!Q.test(k)){var l=k.match(R);l&&(f="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(i.length>0)for(var m=i[0],j=0;j<h.length;++j)if(h[j]===m){j>0&&(g="\n"+h[j-1]);break}}var n="a promise was created in a "+c+"handler "+f+"but was not returned from it, see http://goo.gl/rRqMUw"+g;d._warn(n,!0,b)}}function r(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),s(c)}function s(a,b,d){if(ga.warnings){var e,f=new M(a);if(b)d._attachExtraTrace(f);else if(ga.longStackTraces&&(e=c._peekContext()))e.attachExtraTrace(f);else{var g=y(f);f.stack=g.message+"\n"+g.stack.join("\n")}ba("warning",f)||z(f,"",!0)}}function t(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function u(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function v(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function w(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||S.test(d),f=e&&da(d);e&&!f&&(U&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function x(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||S.test(d))break}return c>0&&"SyntaxError"!=a.name&&(b=b.slice(c)),b}function y(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?x(a):["    (No stack trace)"],{message:c,stack:"SyntaxError"==a.name?b:w(b)}}function z(a,b,c){if("undefined"!=typeof console){var d;if(N.isObject(a)){var e=a.stack;d=b+T(e,a)}else d=b+String(a);"function"==typeof J?J(d,c):"function"==typeof console.log||"object"==typeof console.log}}function A(a,b,c,d){var e=!1;try{"function"==typeof b&&(e=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(a){L.throwLater(a)}"unhandledRejection"===a?ba(a,c,d)||e||z(c,"Unhandled rejection "):ba(a,d)}function B(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():N.toString(a);var c=/\[object [a-zA-Z0-9$_]+\]/;if(c.test(b))try{var d=JSON.stringify(a);b=d}catch(a){}0===b.length&&(b="(empty array)")}return"(<"+C(b)+">, no stack trace)"}function C(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function D(){return"function"==typeof fa}function E(a){var b=a.match(ea);if(b)return{fileName:b[1],line:parseInt(b[2],10)}}function F(a,b){if(D()){for(var c,d,e=a.stack.split("\n"),f=b.stack.split("\n"),g=-1,h=-1,i=0;i<e.length;++i){var j=E(e[i]);if(j){c=j.fileName,g=j.line;break}}for(var i=0;i<f.length;++i){var j=E(f[i]);if(j){d=j.fileName,h=j.line;break}}g<0||h<0||!c||!d||c!==d||g>=h||(da=function(a){if(P.test(a))return!0;var b=E(a);return!!(b&&b.fileName===c&&g<=b.line&&b.line<=h)})}}function G(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);fa(this,G),b>32&&this.uncycle()}var H,I,J,K=c._getDomain,L=c._async,M=b("./errors").Warning,N=b("./util"),O=N.canAttachTrace,P=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,R=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,S=null,T=null,U=!1,V=!(0==N.env("BLUEBIRD_DEBUG")),W=!(0==N.env("BLUEBIRD_WARNINGS")||!V&&!N.env("BLUEBIRD_WARNINGS")),X=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!V&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));c.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=a._bitField&-1048577|524288},c.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},c.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",H,void 0,this)},c.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},c.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},c.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",I,a,this)}},c.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},c.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},c.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},c.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},c.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},c.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},c.prototype._warn=function(a,b,c){return s(a,b,c||this)},c.onPossiblyUnhandledRejection=function(a){var b=K();I="function"==typeof a?null===b?a:N.domainBind(b,a):void 0},c.onUnhandledRejectionHandled=function(a){var b=K();H="function"==typeof a?null===b?a:N.domainBind(b,a):void 0};var Z=function(){};c.longStackTraces=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ga.longStackTraces&&D()){var a=c.prototype._captureStackTrace,b=c.prototype._attachExtraTrace;ga.longStackTraces=!0,Z=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");c.prototype._captureStackTrace=a,c.prototype._attachExtraTrace=b,d.deactivateLongStackTraces(),L.enableTrampoline(),ga.longStackTraces=!1},c.prototype._captureStackTrace=o,c.prototype._attachExtraTrace=p,d.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},c.hasLongStackTraces=function(){return ga.longStackTraces&&D()};var $=function(){try{if("function"==typeof CustomEvent){var a=new CustomEvent("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new CustomEvent(a.toLowerCase(),{detail:b,cancelable:!0});return!N.global.dispatchEvent(c)}}if("function"==typeof Event){var a=new Event("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new Event(a.toLowerCase(),{cancelable:!0});return c.detail=b,!N.global.dispatchEvent(c)}}var a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(a),function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a.toLowerCase(),!1,!0,b),!N.global.dispatchEvent(c)}}catch(a){}return function(){return!1}}(),_=function(){return N.isNode?function(){return a.emit.apply(a,arguments)}:N.global?function(a){var b="on"+a.toLowerCase(),c=N.global[b];return!!c&&(c.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),aa={promiseCreated:e,promiseFulfilled:e,promiseRejected:e,promiseResolved:e,promiseCancelled:e,promiseChained:function(a,b,c){return{promise:b,child:c}},warning:function(a,b){return{warning:b}},unhandledRejection:function(a,b,c){return{reason:b,promise:c}},rejectionHandled:e},ba=function(a){var b=!1;try{b=_.apply(null,arguments)}catch(a){L.throwLater(a),b=!0}var c=!1;try{c=$(a,aa[a].apply(null,arguments))}catch(a){L.throwLater(a),c=!0}return c||b};c.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?c.longStackTraces():!a.longStackTraces&&c.hasLongStackTraces()&&Z()),"warnings"in a){var b=a.warnings;ga.warnings=!!b,Y=ga.warnings,N.isObject(b)&&"wForgottenReturn"in b&&(Y=!!b.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!ga.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");c.prototype._clearCancellationData=k,c.prototype._propagateFrom=l,c.prototype._onCancel=i,c.prototype._setOnCancel=j,c.prototype._attachCancellationCallback=h,c.prototype._execute=g,ca=l,ga.cancellation=!0}return"monitoring"in a&&(a.monitoring&&!ga.monitoring?(ga.monitoring=!0,c.prototype._fireEvent=ba):!a.monitoring&&ga.monitoring&&(ga.monitoring=!1,c.prototype._fireEvent=f)),c},c.prototype._fireEvent=f,c.prototype._execute=function(a,b,c){try{a(b,c)}catch(a){return a}},c.prototype._onCancel=function(){},c.prototype._setOnCancel=function(a){},c.prototype._attachCancellationCallback=function(a){},c.prototype._captureStackTrace=function(){},c.prototype._attachExtraTrace=function(){},c.prototype._clearCancellationData=function(){},c.prototype._propagateFrom=function(a,b){};var ca=m,da=function(){return!1},ea=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(G,Error),d.CapturedTrace=G,G.prototype.uncycle=function(){var a=this._length;if(!(a<2)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;d<a;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;h<a-1?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},G.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=y(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(w(e.stack.split("\n"))),e=e._parent;v(d),u(d),N.notEnumerableProp(a,"stack",t(c,d)),N.notEnumerableProp(a,"__stackCleaned__",!0)}};var fa=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():B(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,S=a,T=b;var c=Error.captureStackTrace;return da=function(a){return P.test(a)},function(a,b){Error.stackTraceLimit+=6,c(a,b),Error.stackTraceLimit-=6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return S=/@/,T=b,U=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(a){e="stack"in a}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(T=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?B(b):b.toString()},null):(S=a,T=b,function(a){Error.stackTraceLimit+=6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(J=function(a){},N.isNode&&a.stderr.isTTY?J=function(a,b){}:N.isNode||"string"!=typeof(new Error).stack||(J=function(a,b){}));var ga={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return X&&c.longStackTraces(),{longStackTraces:function(){return ga.longStackTraces},warnings:function(){return ga.warnings},cancellation:function(){return ga.cancellation},monitoring:function(){return ga.monitoring},propagateFromFunction:function(){return ca},boundValueFunction:function(){return n},checkForgottenReturns:q,setBounds:F,warn:s,deprecated:r,CapturedTrace:G,fireDomEvent:$,fireGlobalEvent:_}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype.return=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype.throw=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function c(){return f(this)}function d(a,c){return e(a,c,b,b)}var e=a.reduce,f=a.all;a.prototype.each=function(a){return e(this,a,b,0)._then(c,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return e(this,a,b,b)},a.each=function(a,d){return e(a,d,b,0)._then(c,void 0,void 0,a,void 0)},a.mapSeries=d}},{}],12:[function(a,b,c){"use strict";function d(a,b){function c(d){return this instanceof c?(l(this,"message","string"==typeof d?d:b),l(this,"name",a),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new c(d)}return k(c,Error),c}function e(a){return this instanceof e?(l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,void(a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new e(a)}var f,g,h=a("./es5"),i=h.freeze,j=a("./util"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(a){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var q="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),r=0;r<q.length;++r)"function"==typeof Array.prototype[q[r]]&&(p.prototype[q[r]]=Array.prototype[q[r]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var s=0;p.prototype.toString=function(){var a=Array(4*s+1).join(" "),b="\n"+a+"AggregateError of:\n";s++,a=Array(4*s+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return s--,b},k(e,Error);var t=Error.__BluebirdErrorTypes__;t||(t=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:t,writable:!1,enumerable:!1,configurable:!1})),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:t.CancellationError,OperationalError:t.OperationalError,TimeoutError:t.TimeoutError,AggregateError:t.AggregateError,Warning:m}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(a){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(a){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,b,c){this.promise=a,this.type=b,this.handler=c,this.called=!1,this.cancelPromise=null}function e(a){this.finallyHandler=a}function f(a,b){return null!=a.cancelPromise&&(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0)}function g(){return i.call(this,this.promise._target()._settledValue())}function h(a){if(!f(this,a))return l.e=a,l}function i(a){var d=this.promise,i=this.handler;if(!this.called){this.called=!0;var j=this.isFinallyHandler()?i.call(d._boundValue()):i.call(d._boundValue(),a);if(void 0!==j){d._setReturnedNonUndefined();var m=c(j,d);if(m instanceof b){if(null!=this.cancelPromise){if(m._isCancelled()){var n=new k("late cancellation observer");return d._attachExtraTrace(n),l.e=n,l}m.isPending()&&m._attachCancellationCallback(new e(this))}return m._then(g,h,void 0,this,void 0)}}}return d.isRejected()?(f(this),l.e=a,l):(f(this),a)}var j=a("./util"),k=b.CancellationError,l=j.errorObj;return d.prototype.isFinallyHandler=function(){return 0===this.type},e.prototype._resultCancelled=function(){f(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,e){return"function"!=typeof a?this.then():this._then(c,e,void 0,new d(this,b,a),void 0)},b.prototype.lastly=b.prototype.finally=function(a){return this._passThrough(a,0,i,i)},b.prototype.tap=function(a){return this._passThrough(a,1,i)},d}},{"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=n(c[f])(a);if(d._popContext(),g===m){d._pushContext();var h=b.reject(m.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function i(a,c,e,f){if(g.cancellation()){var h=new b(d),i=this._finallyPromise=new b(d);this._promise=h.lastly(function(){return i}),h._captureStackTrace(),h._setOnCancel(this)}else{var j=this._promise=new b(d);j._captureStackTrace()}this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(o):o,this._yieldedPromise=null,this._cancellationPhase=!1}var j=a("./errors"),k=j.TypeError,l=a("./util"),m=l.errorObj,n=l.tryCatch,o=[];l.inherits(i,f),i.prototype._isResolved=function(){return null===this._promise},i.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},i.prototype._promiseCancelled=function(){if(!this._isResolved()){var a,c="undefined"!=typeof this._generator.return;if(c)this._promise._pushContext(),a=n(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),a=n(this._generator.throw).call(this._generator,d),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(a)}},i.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=n(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=n(this._generator.throw).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},i.prototype._continue=function(a){var c=this._promise;if(a===m)return this._cleanup(),this._cancellationPhase?c.cancel():c._rejectCallback(a.e,!1);var d=a.value;if(a.done===!0)return this._cleanup(),this._cancellationPhase?c.cancel():c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&(f=h(f,this._yieldHandlers,this._promise),null===f))return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0===(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!==(33554432&g)?b._async.invoke(this._promiseFulfilled,this,f._value()):0!==(16777216&g)?b._async.invoke(this._promiseRejected,this,f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=i,e=(new Error).stack;
return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new k("expecting a function but got "+l.classString(a));o.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new i(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){var h=a("./util");h.canEvaluate,h.tryCatch,h.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}var e=[].slice.call(arguments);a&&e.pop();var d=new c(e).promise();return void 0!==a?d.spread(a):d}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:k.domainBind(e,b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],n.invoke(this._asyncInit,this,void 0)}function i(a,c,e,f){if("function"!=typeof c)return d("expecting a function but got "+k.classString(c));var g=0;if(void 0!==e){if("object"!=typeof e||null===e)return b.reject(new TypeError("options argument must be an object but it is "+k.classString(e)));if("number"!=typeof e.concurrency)return b.reject(new TypeError("'concurrency' must be a number but it is "+k.classString(e.concurrency)));g=e.concurrency}return g="number"==typeof g&&isFinite(g)&&g>=1?g:0,new h(a,c,g,f).promise()}var j=b._getDomain,k=a("./util"),l=k.tryCatch,m=k.errorObj,n=b._async;k.inherits(h,c),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(c<0){if(c=c*-1-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var j=this._promise,k=this._callback,n=j._boundValue();j._pushContext();var o=l(k).call(n,a,c,f),p=j._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",j),o===m)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0===(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,(c+1)*-1),!1;if(0===(33554432&r))return 0!==(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}var s=++this._totalResolved;return s>=f&&(null!==h?this._filter(d,h):this._resolve(d),!0)},h.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},h.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;f<c;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},h.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return i(this,a,b,null)},b.map=function(a,b,c,d){return i(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b.try=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&k.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new j(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=k.keys(a),e=0;e<c.length;++e){var f=c[e];l.test(f)||(b[f]=a[f])}return b}return g.markAsOriginatingFromRejection(a),a}function f(a,b){return function(c,d){if(null!==a){if(c){var f=e(h(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var g=a("./util"),h=g.maybeWrapAsError,i=a("./errors"),j=i.OperationalError,k=a("./es5"),l=/^(?:name|message|stack|cause)$/;b.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=new Error(a+"");d.cause=a,a=d}var e=h(b).call(c._boundValue(),a);e===i&&g.throwLater(e.e)}var f=a("./util"),g=b._async,h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./util":36}],22:[function(b,c,d){"use strict";c.exports=function(){function d(){}function e(a,b){if("function"!=typeof b)throw new t("expecting a function but got "+o.classString(b));if(a.constructor!==f)throw new t("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function f(a){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,a!==v&&(e(this,a),this._resolveFromExecutor(a)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function g(a){this.promise._resolveCallback(a)}function h(a){this.promise._rejectCallback(a,!1)}function i(a){var b=new f(v);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var j,k=function(){return new t("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new f.PromiseInspection(this._target())},m=function(a){return f.reject(new t(a))},n={},o=b("./util");j=o.isNode?function(){var b=a.domain;return void 0===b&&(b=null),b}:function(){return null},o.notEnumerableProp(f,"_getDomain",j);var p=b("./es5"),q=b("./async"),r=new q;p.defineProperty(f,"_async",{value:r});var s=b("./errors"),t=f.TypeError=s.TypeError;f.RangeError=s.RangeError;var u=f.CancellationError=s.CancellationError;f.TimeoutError=s.TimeoutError,f.OperationalError=s.OperationalError,f.RejectionError=s.OperationalError,f.AggregateError=s.AggregateError;var v=function(){},w={},x={},y=b("./thenables")(f,v),z=b("./promise_array")(f,v,y,m,d),A=b("./context")(f),B=A.create,C=b("./debuggability")(f,A),D=(C.CapturedTrace,b("./finally")(f,y)),E=b("./catch_filter")(x),F=b("./nodeback"),G=o.errorObj,H=o.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;c<b-1;++c){var f=arguments[c];if(!o.isObject(f))return m("expecting an object but got A catch statement predicate "+o.classString(f));d[e++]=f}return d.length=e,a=arguments[c],this.then(void 0,E(d,a,this))}return this.then(void 0,a)},f.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},f.prototype.then=function(a,b){if(C.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+o.classString(a);arguments.length>1&&(c+=", "+o.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},f.prototype.done=function(a,b){var c=this._then(a,b,void 0,void 0,void 0);c._setIsFinal()},f.prototype.spread=function(a){return"function"!=typeof a?m("expecting a function but got "+o.classString(a)):this.all()._then(a,void 0,void 0,w,void 0)},f.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},f.prototype.error=function(a){return this.caught(o.originatesFromRejection,a)},f.getNewLibraryCopy=c.exports,f.is=function(a){return a instanceof f},f.fromNode=f.fromCallback=function(a){var b=new f(v);b._captureStackTrace();var c=arguments.length>1&&!!Object(arguments[1]).multiArgs,d=H(a)(F(b,c));return d===G&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},f.all=function(a){return new z(a).promise()},f.cast=function(a){var b=y(a);return b instanceof f||(b=new f(v),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(a){var b=new f(v);return b._captureStackTrace(),b._rejectCallback(a,!0),b},f.setScheduler=function(a){if("function"!=typeof a)throw new t("expecting a function but got "+o.classString(a));return r.setScheduler(a)},f.prototype._then=function(a,b,c,d,e){var g=void 0!==e,h=g?e:new f(v),i=this._target(),k=i._bitField;g||(h._propagateFrom(this,3),h._captureStackTrace(),void 0===d&&0!==(2097152&this._bitField)&&(d=0!==(50397184&k)?this._boundValue():i===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,h));var l=j();if(0!==(50397184&k)){var m,n,p=i._settlePromiseCtx;0!==(33554432&k)?(n=i._rejectionHandler0,m=a):0!==(16777216&k)?(n=i._fulfillmentHandler0,m=b,i._unsetRejectionIsUnhandled()):(p=i._settlePromiseLateCancellationObserver,n=new u("late cancellation observer"),i._attachExtraTrace(n),m=b),r.invoke(p,i,{handler:null===l?m:"function"==typeof m&&o.domainBind(l,m),promise:h,receiver:d,value:n})}else i._addCallbacks(a,b,h,d,l);return h},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},f.prototype._setLength=function(a){this._bitField=this._bitField&-65536|65535&a},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){r.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},f.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];if(b!==n)return void 0===b&&this._isBound()?this._boundValue():b},f.prototype._promiseAt=function(a){return this[4*a-4+2]},f.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},f.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(a){var b=(a._bitField,a._fulfillmentHandler0),c=a._rejectionHandler0,d=a._promise0,e=a._receiverAt(0);void 0===e&&(e=n),this._addCallbacks(b,c,d,e,null)},f.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=n),this._addCallbacks(c,d,e,f,null)},f.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:o.domainBind(e,b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this[g+1]=null===e?b:o.domainBind(e,b))}return this._setLength(f+1),f},f.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},f.prototype._resolveCallback=function(a,b){if(0===(117506048&this._bitField)){if(a===this)return this._rejectCallback(k(),!1);var c=y(a,this);if(!(c instanceof f))return this._fulfill(a);b&&this._propagateFrom(c,2);var d=c._target();if(d===this)return void this._reject(k());var e=d._bitField;if(0===(50397184&e)){var g=this._length();g>0&&d._migrateCallback0(this);for(var h=1;h<g;++h)d._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(d)}else if(0!==(33554432&e))this._fulfill(d._value());else if(0!==(16777216&e))this._reject(d._reason());else{var i=new u("late cancellation observer");d._attachExtraTrace(i),this._reject(i)}}},f.prototype._rejectCallback=function(a,b,c){var d=o.ensureErrorObject(a),e=d===a;if(!e&&!c&&C.warnings()){var f="a promise was rejected with a non-error: "+o.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,!!b&&e),this._reject(a)},f.prototype._resolveFromExecutor=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)},f.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0===(65536&e)){d._pushContext();var f;b===w?c&&"number"==typeof c.length?f=H(a).apply(this._boundValue(),c):(f=G,f.e=new t("cannot .spread() a non-array: "+o.classString(c))):f=H(a).call(b,c);var g=d._popContext();e=d._bitField,0===(65536&e)&&(f===x?d._reject(c):f===G?d._rejectCallback(f.e,!1):(C.checkForgottenReturns(f,g,"",d,this),d._resolveCallback(f)))}},f.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(a){this._rejectionHandler0=a},f.prototype._settlePromise=function(a,b,c,e){var g=a instanceof f,h=this._bitField,i=0!==(134217728&h);0!==(65536&h)?(g&&a._invokeInternalOnCancel(),c instanceof D&&c.isFinallyHandler()?(c.cancelPromise=a,H(b).call(c,e)===G&&a._reject(G.e)):b===l?a._fulfill(l.call(c)):c instanceof d?c._promiseCancelled(a):g||a instanceof z?a._cancel():c.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,c,e,a)):b.call(c,e,a):c instanceof d?c._isResolved()||(0!==(33554432&h)?c._promiseFulfilled(e,a):c._promiseRejected(e,a)):g&&(i&&a._setAsyncGuaranteed(),0!==(33554432&h)?a._fulfill(e):a._reject(e))},f.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,e=a.value;"function"==typeof b?c instanceof f?this._settlePromiseFromHandler(b,d,e,c):b.call(d,e,c):c instanceof f&&c._reject(e)},f.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},f.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},f.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},f.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var c=k();return this._attachExtraTrace(c),this._reject(c)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!==(134217728&b)?this._settlePromises():r.settlePromises(this))}},f.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16))return this._setRejected(),this._fulfillmentHandler0=a,this._isFinal()?r.fatalError(a,o.isNode):void((65535&b)>0?r.settlePromises(this):this._ensurePossibleRejectionHandled())},f.prototype._fulfillPromises=function(a,b){for(var c=1;c<a;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._rejectPromises=function(a,b){for(var c=1;c<a;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!==(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var a=this._bitField;return 0!==(33554432&a)?this._rejectionHandler0:0!==(16777216&a)?this._fulfillmentHandler0:void 0},f.defer=f.pending=function(){C.deprecated("Promise.defer","new Promise");var a=new f(v);return{promise:a,resolve:g,reject:h}},o.notEnumerableProp(f,"_makeSelfResolutionError",k),b("./method")(f,v,y,m,C),b("./bind")(f,v,y,C),b("./cancel")(f,z,m,C),b("./direct_resolve")(f),b("./synchronous_inspection")(f),b("./join")(f,z,y,v,r,j),f.Promise=f,f.version="3.4.7",b("./map.js")(f,z,m,y,v,C),b("./call_get.js")(f),b("./using.js")(f,m,y,B,v,C),b("./timers.js")(f,v,C),b("./generators.js")(f,m,v,y,d,C),b("./nodeify.js")(f),b("./promisify.js")(f,v),b("./props.js")(f,z,y,m),b("./race.js")(f,v,y,m),b("./reduce.js")(f,z,m,y,v,C),b("./settle.js")(f,z,C),b("./some.js")(f,z,m),b("./filter.js")(f,v),b("./each.js")(f,v),b("./any.js")(f),o.toFastProperties(f),o.toFastProperties(f.prototype),i({a:1}),i({b:2}),i({c:3}),i(1),i(function(){}),i(void 0),i(!1),i(new f(v)),C.setBounds(q.firstLineError,o.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a){switch(a){case-2:return[];case-3:return{}}}function h(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var i=a("./util");i.isArray;return i.inherits(h,f),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function a(c,f){var h=d(this._values,this._promise);if(h instanceof b){h=h._target();var j=h._bitField;if(this._values=h,0===(50397184&j))return this._promise._setAsyncGuaranteed(),h._then(a,this._reject,void 0,this,f);if(0===(33554432&j))return 0!==(16777216&j)?this._reject(h._reason()):this._cancel();h=h._value()}if(h=i.asArray(h),null===h){var k=e("expecting an array or an iterable object but got "+i.classString(h)).reason();return void this._promise._rejectCallback(k,!1)}return 0===h.length?void(f===-5?this._resolveEmptyArray():this._resolve(g(f))):void this._iterate(h)},h.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;h<c;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0===(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!==(33554432&g)?this._promiseFulfilled(i._value(),h):0!==(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;return c>=this._length&&(this._resolve(this._values),!0)},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!w.test(a)}function e(a){try{return a.__isPromisified__===!0}catch(a){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,u);return!!d&&e(d)}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===x||x(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f,g,h){function i(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof k&&this!==j?this[k]:a,i=o(f,h);try{g.apply(e,p(arguments,i))}catch(a){f._rejectCallback(q(a),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var j=function(){return this}(),k=a;return"string"==typeof k&&(a=f),n.notEnumerableProp(i,"__isPromisified__",!0),i}function j(a,b,c,d,e){for(var f=new RegExp(y(b)+"$"),g=h(a,b,f,c),i=0,j=g.length;i<j;i+=2){var k=g[i],l=g[i+1],o=k+b;if(d===z)a[o]=z(k,m,k,l,b,e);else{var p=d(l,function(){return z(k,m,k,l,b,e)});n.notEnumerableProp(p,"__isPromisified__",!0),a[o]=p}}return n.toFastProperties(a),a}function k(a,b,c){return z(a,b,void 0,a,null,c)}var l,m={},n=a("./util"),o=a("./nodeback"),p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t="Async",u={__isPromisified__:!0},v=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+v.join("|")+")$"),x=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},y=function(a){return a.replace(/([$])/,"\\$")},z=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));if(e(a))return a;b=Object(b);var c=void 0===b.context?m:b.context,f=!!b.multiArgs,g=k(a,c,f);return n.copyDescriptors(a,g,d),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d=t);var e=b.filter;"function"!=typeof e&&(e=x);var f=b.promisifier;if("function"!=typeof f&&(f=z),!n.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var g=n.inheritedDataKeys(a),h=0;h<g.length;++h){var i=a[g[h]];"constructor"!==g[h]&&n.isClass(i)&&(j(i.prototype,d,e,f,c),j(i,d,e,f,c))}return j(a,d,e,f,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){var b,c=!1;if(void 0!==h&&a instanceof h)b=l(a),c=!0;else{var d=k.keys(a),e=d.length;b=new Array(2*e);for(var f=0;f<e;++f){var g=d[f];b[f]=a[g],b[f+e]=g}}this.constructor$(b),this._isMap=c,this._init$(void 0,-3)}function g(a){var c,g=d(a);return j(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var h,i=a("./util"),j=i.isObject,k=a("./es5");"function"==typeof Map&&(h=Map);var l=function(){function a(a,d){this[b]=a,this[b+c]=d,b++}var b=0,c=0;return function(d){c=d.size,b=0;var e=new Array(2*d.size);return d.forEach(a,e),e}}(),m=function(a){for(var b=new h,c=a.length/2|0,d=0;d<c;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};i.inherits(f,c),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;if(c>=this._length){var d;if(this._isMap)d=m(this._values);else{d={};for(var e=this.length(),f=0,g=this.length();f<g;++f)d[this._values[f+e]]=this._values[f]}return this._resolve(d),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;f<e;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a;var c=this._front,e=this._length,f=c+e&b-1;d(this,0,this,b,f)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(a=g.asArray(a),null===a)return e("expecting an array or an iterable object but got "+g.classString(a));var j=new b(c);void 0!==f&&j._propagateFrom(f,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;m<n;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util"),h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d,e){this.constructor$(a);var g=m();this._fn=null===g?c:n.domainBind(g,c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,e===f?this._eachValues=Array(this._length):0===e?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function i(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function j(a,b,c,e){if("function"!=typeof b)return d("expecting a function but got "+n.classString(b));var f=new h(a,b,c,e);return f.promise()}function k(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(l,void 0,void 0,this,void 0)):l.call(this,c)}function l(a){var c=this.array,d=c._promise,e=o(c._fn);d._pushContext();var f;f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length),f instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var m=b._getDomain,n=a("./util"),o=n.tryCatch;n.inherits(h,c),h.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==f&&this._eachValues.push(a)},h.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},h.prototype._resultCancelled=function(a){return a===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel()))},h.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;d<e;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(k,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(i,i,void 0,c,this)},b.prototype.reduce=function(a,b){return j(this,a,b,null)},b.reduce=function(a,b,c,d){return j(a,b,c,d)}}},{"./util":36}],29:[function(b,c,e){"use strict";var f,g=b("./util"),h=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},i=g.getNativePromise();if(g.isNode&&"undefined"==typeof MutationObserver){var j=d.setImmediate,k=a.nextTick;f=g.isRecentNode?function(a){j.call(d,a)}:function(b){k.call(a,b)}}else if("function"==typeof i&&"function"==typeof i.resolve){var l=i.resolve();f=function(a){l.then(a)}}else f="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:h:function(){var a=document.createElement("div"),b={attributes:!0},c=!1,d=document.createElement("div"),e=new MutationObserver(function(){a.classList.toggle("foo"),c=!1});e.observe(d,b);var f=function(){c||(c=!0,d.classList.toggle("foo"))};return function(c){var d=new MutationObserver(function(){d.disconnect(),c()});d.observe(a,b),f()}}();c.exports=f},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a)}var f=b.PromiseInspection,g=a("./util");g.inherits(e,c),e.prototype._promiseResolved=function(a,b){this._values[a]=b;var c=++this._totalResolved;return c>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseFulfilled=function(a,b){var c=new f;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},e.prototype._promiseRejected=function(a,b){var c=new f;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new e(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||b<0)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util"),h=a("./errors").RangeError,i=a("./errors").AggregateError,j=g.isArray,k={};
g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},e.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},e.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(k),this._checkOutcome())},e.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new i,b=this.length();b<this._values.length;++b)this._values[b]!==k&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0===(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};b.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},a.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},a.prototype._isCancelled=function(){return this._target().__isCancelled()},a.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(k(a)){if(a instanceof b)return a;var e=f(a);if(e===j){d&&d._pushContext();var i=b.reject(e.e);return d&&d._popContext(),i}if("function"==typeof e){if(g(a)){var i=new b(c);return a._then(i._fulfill,i._reject,void 0,i,null),i}return h(a,e,d)}}return a}function e(a){return a.then}function f(a){try{return e(a)}catch(a){return j.e=a,j}}function g(a){try{return l.call(a,"_promise0")}catch(a){return!1}}function h(a,d,e){function f(a){h&&(h._resolveCallback(a),h=null)}function g(a){h&&(h._rejectCallback(a,l,!0),h=null)}var h=new b(c),k=h;e&&e._pushContext(),h._captureStackTrace(),e&&e._popContext();var l=!0,m=i.tryCatch(d).call(a,f,g);return l=!1,h&&m===j&&(h._rejectCallback(m.e,!0,!0),h=null),k}var i=a("./util"),j=i.errorObj,k=i.isObject,l={}.hasOwnProperty;return d}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.handle=a}function f(a){return clearTimeout(this.handle),a}function g(a){throw clearTimeout(this.handle),a}var h=a("./util"),i=b.TimeoutError;e.prototype._resultCancelled=function(){clearTimeout(this.handle)};var j=function(a){return k(+this).thenReturn(a)},k=b.delay=function(a,f){var g,h;return void 0!==f?(g=b.resolve(f)._then(j,null,null,a,void 0),d.cancellation()&&f instanceof b&&g._setOnCancel(f)):(g=new b(c),h=setTimeout(function(){g._fulfill()},+a),d.cancellation()&&g._setOnCancel(new e(h)),g._captureStackTrace()),g._setAsyncGuaranteed(),g};b.prototype.delay=function(a){return k(a,this)};var l=function(a,b,c){var d;d="string"!=typeof b?b instanceof Error?b:new i("operation timed out"):new i(b),h.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),null!=c&&c.cancel()};b.prototype.timeout=function(a,b){a=+a;var c,h,i=new e(setTimeout(function(){c.isPending()&&l(c,b,h)},a));return d.cancellation()?(h=this.then(),c=h._then(f,g,void 0,i,void 0),c._setOnCancel(i)):c=this._then(f,g,void 0,i,void 0),c}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a){setTimeout(function(){throw a},0)}function i(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function j(a,c){function e(){if(g>=j)return k._fulfill();var f=i(a[g++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(a){return h(a)}if(f instanceof b)return f._then(e,h,null,null,null)}e()}var g=0,j=a.length,k=new b(f);return e(),k}function k(a,b,c){this._data=a,this._promise=b,this._context=c}function l(a,b,c){this.constructor$(a,b,c)}function m(a){return k.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function n(a){this.length=a,this.promise=null,this[a-1]=null}var o=a("./util"),p=a("./errors").TypeError,q=a("./util").inherits,r=o.errorObj,s=o.tryCatch,t={};k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():t},k.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=b!==t?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},k.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},q(l,k),l.prototype.doDispose=function(a,b){var c=this.data();return c.call(a,a,b)},n.prototype._resultCancelled=function(){for(var a=this.length,c=0;c<a;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(a<2)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+o.classString(e));var f,h=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,h=!1):(f=arguments,a--);for(var i=new n(a),l=0;l<a;++l){var p=f[l];if(k.isDisposer(p)){var q=p;p=p.promise(),p._setDisposable(q)}else{var t=d(p);t instanceof b&&(p=t._then(m,null,null,{resources:i,index:l},void 0))}i[l]=p}for(var u=new Array(i.length),l=0;l<u.length;++l)u[l]=b.resolve(i[l]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return r.e=c.error(),r;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=s(e);var d=h?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return j(i,a)});return i.promise=w,w._setOnCancel(i),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new l(a,this,e());throw new p}}},{"./errors":12,"./util":36}],36:[function(b,c,e){"use strict";function f(){try{var a=F;return F=null,a.apply(this,arguments)}catch(a){return E.e=a,E}}function g(a){return F=a,f}function h(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function i(a){return"function"==typeof a||"object"==typeof a&&null!==a}function j(a){return h(a)?new Error(s(a)):a}function k(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;c<d;++c)e[c]=a[c];return e[c]=b,e}function l(a,b,c){if(!C.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function m(a,b,c){if(h(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return C.defineProperty(a,b,d),a}function n(a){throw a}function o(a){try{if("function"==typeof a){var b=C.names(a.prototype),c=C.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=J.test(a+"")&&C.names(a).length>0;if(c||d||e)return!0}return!1}catch(a){return!1}}function p(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function q(a){return K.test(a)}function r(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=b+e+c;return d}function s(a){try{return a+""}catch(a){return"[no string representation]"}}function t(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function u(a){try{m(a,"isOperational",!0)}catch(a){}}function v(a){return null!=a&&(a instanceof Error.__BluebirdErrorTypes__.OperationalError||a.isOperational===!0)}function w(a){return t(a)&&C.propertyIsWritable(a,"stack")}function x(a){return{}.toString.call(a)}function y(a,b,c){for(var d=C.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{C.defineProperty(b,f,C.getDescriptor(a,f))}catch(a){}}}function z(b){return P?a.env[b]:void 0}function A(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(a){}}function B(a,b){return a.bind(b)}var C=b("./es5"),D="undefined"==typeof navigator,E={e:{}},F,G="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof d?d:void 0!==this?this:null,H=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},I=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(C.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(a){return d}for(var g=0;g<f.length;++g){var h=f[g];if(!e[h]){e[h]=!0;var i=Object.getOwnPropertyDescriptor(a,h);null!=i&&null==i.get&&null==i.set&&d.push(h)}}a=C.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),J=/this\s*\.\s*\S+\s*=/,K=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(a){return w(a)?a:new Error(s(a))}:function(a){if(w(a))return a;try{throw new Error(s(a))}catch(a){return a}}}(),M=function(a){return C.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var b,c=[],d=a[Symbol.iterator]();!(b=d.next()).done;)c.push(b.value);return c};M=function(a){return C.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?N(a):null}}var O="undefined"!=typeof a&&"[object process]"===x(a).toLowerCase(),P="undefined"!=typeof a&&"undefined"!=typeof a.env,Q={isClass:o,isIdentifier:q,inheritedDataKeys:I,getDataPropertyOrDefault:l,thrower:n,isArray:C.isArray,asArray:M,notEnumerableProp:m,isPrimitive:h,isObject:i,isError:t,canEvaluate:D,errorObj:E,tryCatch:g,inherits:H,withAppended:k,maybeWrapAsError:j,toFastProperties:p,filledRange:r,toString:s,canAttachTrace:w,ensureErrorObject:L,originatesFromRejection:v,markAsOriginatingFromRejection:u,classString:x,copyDescriptors:y,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:O,hasEnvVariables:P,env:z,global:G,getNativePromise:A,domainBind:B};Q.isRecentNode=Q.isNode&&function(){var b=a.versions.node.split(".").map(Number);return 0===b[0]&&b[1]>10||b[0]>0}(),Q.isNode&&Q.toFastProperties(a);try{throw new Error}catch(a){Q.lastLineError=a}c.exports=Q},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:5}],2:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.returnExports=d()}(this,function(){function a(e,f){if("function"!=typeof f)throw new Error("Bad callback given: "+f);if(!e)throw new Error("No options given");var h=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=h,e.verbose&&(a.log=d()),e.url&&(e.uri=e.url,delete e.url),!e.uri&&""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var i=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],j=0;j<i.length;j++)if(e[i[j]])throw new Error("options."+i[j]+" is not supported");if(e.callback=f,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||a.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&&(e.body=JSON.stringify(e.body)));var k=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};if(e.qs){var l="string"==typeof e.qs?e.qs:k(e.qs);e.uri.indexOf("?")!==-1?e.uri=e.uri+"&"+l:e.uri=e.uri+"?"+l}var m=function(a){var b={};b.boundry="-------------------------------"+Math.floor(1e9*Math.random());var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push("--"+b.boundry+'\nContent-Disposition: form-data; name="'+d+'"\n\n'+a[d]+"\n");return c.push("--"+b.boundry+"--"),b.body=c.join(""),b.length=b.body.length,b.type="multipart/form-data; boundary="+b.boundry,b};if(e.form){if("string"==typeof e.form)throw"form name unsupported";if("POST"===e.method){var n=(e.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(e.headers["content-type"]=n,n){case"application/x-www-form-urlencoded":e.body=k(e.form).replace(/%20/g,"+");break;case"multipart/form-data":var o=m(e.form);e.body=o.body,e.headers["content-type"]=o.type;break;default:throw new Error("unsupported encoding:"+n)}}}return e.onResponse=e.onResponse||c,e.onResponse===!0&&(e.onResponse=f,e.callback=c),!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+g(e.auth.username+":"+e.auth.password)),b(e)}function b(b){function c(){l=!0;var c=new Error("ETIMEDOUT");return c.code="ETIMEDOUT",c.duration=b.timeout,a.log.error("Timeout",{id:k._id,milliseconds:b.timeout}),b.callback(c,k)}function d(c){if(l)return a.log.debug("Ignoring timed out state change",{state:k.readyState,id:k.id});if(a.log.debug("State change",{state:k.readyState,id:k.id,timed_out:l}),k.readyState===h.OPENED){a.log.debug("Request started",{id:k.id});for(var d in b.headers)k.setRequestHeader(d,b.headers[d])}else k.readyState===h.HEADERS_RECEIVED?e():k.readyState===h.LOADING?(e(),g()):k.readyState===h.DONE&&(e(),g(),i())}function e(){if(!p.response){if(p.response=!0,a.log.debug("Got response",{id:k.id,status:k.status}),clearTimeout(k.timeoutTimer),k.statusCode=k.status,m&&0==k.statusCode){var c=new Error("CORS request rejected: "+b.uri);return c.cors="rejected",p.loading=!0,p.end=!0,b.callback(c,k)}b.onResponse(null,k)}}function g(){p.loading||(p.loading=!0,a.log.debug("Response body loading",{id:k.id}))}function i(){if(!p.end){if(p.end=!0,a.log.debug("Request done",{id:k.id}),k.body=k.responseText,b.json)try{k.body=JSON.parse(k.responseText)}catch(a){return b.callback(a,k)}b.callback(null,k,k.body)}}var k=new h,l=!1,m=f(b.uri),n="withCredentials"in k;if(j+=1,k.seq_id=j,k.id=j+": "+b.method+" "+b.uri,k._id=k.id,m&&!n){var o=new Error("Browser does not support cross-origin request: "+b.uri);return o.cors="unsupported",b.callback(o,k)}k.timeoutTimer=setTimeout(c,b.timeout);var p={response:!1,loading:!1,end:!1};return k.onreadystatechange=d,k.open(b.method,b.uri,!0),m&&(k.withCredentials=!!b.withCredentials),k.send(b.body),k}function c(){}function d(){var a,b,d={},f=["trace","debug","info","warn","error"];for(b=0;b<f.length;b++)a=f[b],d[a]=c,"undefined"!=typeof console&&console&&console[a]&&(d[a]=e(console,a));return d}function e(a,b){function c(c,d){return"object"==typeof d&&(c+=" "+JSON.stringify(d)),a[b].call(a,c)}return c}function f(a){var b,c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{b=location.href}catch(a){b=document.createElement("a"),b.href="",b=b.href}var d=c.exec(b.toLowerCase())||[],e=c.exec(a.toLowerCase()),f=!(!e||e[1]==d[1]&&e[2]==d[2]&&(e[3]||("http:"===e[1]?80:443))==(d[3]||("http:"===d[1]?80:443)));return f}function g(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}var h=XMLHttpRequest;if(!h)throw new Error("missing XMLHttpRequest");a.log={trace:c,debug:c,info:c,warn:c,error:c};var i=18e4,j=0;a.withCredentials=!1,a.DEFAULT_TIMEOUT=i,a.defaults=function(b,c){var d=function(a){var c=function(c,d){c="string"==typeof c?{uri:c}:JSON.parse(JSON.stringify(c));for(var e in b)void 0===c[e]&&(c[e]=b[e]);return a(c,d)};return c},e=d(a);return e.get=d(a.get),e.post=d(a.post),e.put=d(a.put),e.head=d(a.head),e};var k=["get","put","post","head"];return k.forEach(function(b){var c=b.toUpperCase(),d=b.toLowerCase();a[d]=function(b){"string"==typeof b?b={method:c,uri:b}:(b=JSON.parse(JSON.stringify(b)),b.method=c);var d=[b].concat(Array.prototype.slice.apply(arguments,[1]));return a.apply(this,d)}}),a.couch=function(b,d){function e(a,b,c){if(a)return d(a,b,c);if((b.statusCode<200||b.statusCode>299)&&c.error){a=new Error("CouchDB error: "+(c.error.reason||c.error.error));for(var e in c)a[e]=c[e];return d(a,b,c)}return d(a,b,c)}"string"==typeof b&&(b={uri:b}),b.json=!0,b.body&&(b.json=b.body),delete b.body,d=d||c;var f=a(b,e);return f},a})},{}],3:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,"function"==typeof console.trace)),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],4:[function(a,b,c){!function(a,d){"use strict";"object"==typeof c?b.exports=d():"function"==typeof define&&define.amd?define(d):a.MersenneTwister=d()}(this,function(){"use strict";var a=4294967296,b=624,c=397,d=2147483648,e=2147483647,f=2567483615,g=function(a){"undefined"==typeof a&&(a=(new Date).getTime()),this.mt=new Array(b),this.mti=b+1,this.seed(a)};g.prototype.seed=function(a){var c;for(this.mt[0]=a>>>0,this.mti=1;this.mti<b;this.mti++)c=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&c)>>>16)<<16)+1812433253*(65535&c)+this.mti,this.mt[this.mti]>>>=0},g.prototype.seedArray=function(a){var c,d=1,e=0,f=b>a.length?b:a.length;for(this.seed(19650218);f>0;f--)c=this.mt[d-1]^this.mt[d-1]>>>30,this.mt[d]=(this.mt[d]^(1664525*((4294901760&c)>>>16)<<16)+1664525*(65535&c))+a[e]+e,this.mt[d]>>>=0,d++,e++,d>=b&&(this.mt[0]=this.mt[b-1],d=1),e>=a.length&&(e=0);for(f=b-1;f;f--)c=this.mt[d-1]^this.mt[d-1]>>>30,this.mt[d]=(this.mt[d]^(1566083941*((4294901760&c)>>>16)<<16)+1566083941*(65535&c))-d,this.mt[d]>>>=0,d++,d>=b&&(this.mt[0]=this.mt[b-1],d=1);this.mt[0]=2147483648},g.prototype.int=function(){var a,g,h=new Array(0,f);if(this.mti>=b){for(this.mti===b+1&&this.seed(5489),g=0;g<b-c;g++)a=this.mt[g]&d|this.mt[g+1]&e,this.mt[g]=this.mt[g+c]^a>>>1^h[1&a];for(;g<b-1;g++)a=this.mt[g]&d|this.mt[g+1]&e,this.mt[g]=this.mt[g+(c-b)]^a>>>1^h[1&a];a=this.mt[b-1]&d|this.mt[0]&e,this.mt[b-1]=this.mt[c-1]^a>>>1^h[1&a],this.mti=0}return a=this.mt[this.mti++],a^=a>>>11,a^=a<<7&2636928640,a^=a<<15&4022730752,a^=a>>>18,a>>>0},g.prototype.int31=function(){return this.int()>>>1},g.prototype.real=function(){return this.int()*(1/(a-1))},g.prototype.realx=function(){return(this.int()+.5)*(1/a)},g.prototype.rnd=function(){return this.int()*(1/a)},g.prototype.random=g.prototype.rnd,g.prototype.rndHiRes=function(){var a=this.int()>>>5,b=this.int()>>>6;return(67108864*a+b)*(1/9007199254740992)};var h=new g;return g.random=function(){return h.rnd()},g})},{}],5:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(a,b,c){!function(a){function c(a,b,c,d){var e,f,g,h,i,j,k,l=b&&b.ownerDocument,n=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==n&&9!==n&&11!==n)return c;if(!d&&((b?b.ownerDocument||b:Q)!==I&&H(b),b=b||I,K)){if(11!==n&&(i=sa.exec(a)))if(e=i[1]){if(9===n){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(l&&(g=l.getElementById(e))&&O(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return _.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&x.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(e)),c}if(x.qsa&&!V[a+" "]&&(!L||!L.test(a))){if(1!==n)l=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(wa,xa):b.setAttribute("id",h=P),j=B(a),f=j.length;f--;)j[f]="#"+h+" "+o(j[f]);k=j.join(","),l=ta.test(a)&&m(b.parentNode)||b}if(k)try{return _.apply(c,l.querySelectorAll(k)),c}catch(a){}finally{h===P&&b.removeAttribute("id")}}}return D(a.replace(ia,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+" ")>y.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function e(a){return a[P]=!0,a}function f(a){var b=I.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=c.length;d--;)y.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&za(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function l(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function m(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function n(){}function o(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function p(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=S++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[R,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[P]||(b[P]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===R&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function q(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function r(a,b,d){for(var e=0,f=b.length;e<f;e++)c(a,b[e],d);return d}function s(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function t(a,b,c,d,f,g){return d&&!d[P]&&(d=t(d)),f&&!f[P]&&(f=t(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||r(b||"*",h.nodeType?[h]:h,[]),q=!a||!e&&b?p:s(p,m,a,h,i),t=c?f||(e?a:o||d)?[]:g:q;if(c&&c(q,t,h,i),d)for(j=s(t,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(q[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(q[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?ba(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else t=s(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):_.apply(g,t)})}function u(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=p(function(a){return a===b},g,!0),j=p(function(a){return ba(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==E)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=y.relative[a[h].type])k=[p(q(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[P]){for(d=++h;d<e&&!y.relative[a[d].type];d++);return t(h>1&&q(k),h>1&&o(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,h<d&&u(a.slice(h,d)),d<e&&u(a=a.slice(d)),d<e&&o(a))}k.push(c)}return q(k)}function v(a,b){var d=b.length>0,f=a.length>0,g=function(e,g,h,i,j){var k,l,m,n=0,o="0",p=e&&[],q=[],r=E,t=e||f&&y.find.TAG("*",j),u=R+=null==r?1:Math.random()||.1,v=t.length;for(j&&(E=g===I||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===I||(H(k),h=!K);m=a[l++];)if(m(k,g||I,h)){i.push(k);break}j&&(R=u)}d&&((k=!m&&k)&&n--,e&&p.push(k))}if(n+=o,d&&o!==n){for(l=0;m=b[l++];)m(p,q,g,h);if(e){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Z.call(i));q=s(q)}_.apply(i,q),j&&!e&&q.length>0&&n+b.length>1&&c.uniqueSort(i)}return j&&(R=u,E=r),p};return d?e(g):g}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P="sizzle"+1*new Date,Q=a.document,R=0,S=0,T=d(),U=d(),V=d(),W=function(a,b){return a===b&&(G=!0),0},X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,aa=Y.slice,ba=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;
return-1},ca="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",da="[\\x20\\t\\r\\n\\f]",ea="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",fa="\\["+da+"*("+ea+")(?:"+da+"*([*^$|!~]?=)"+da+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+da+"*\\]",ga=":("+ea+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(da+"+","g"),ia=new RegExp("^"+da+"+|((?:^|[^\\\\])(?:\\\\.)*)"+da+"+$","g"),ja=new RegExp("^"+da+"*,"+da+"*"),ka=new RegExp("^"+da+"*([>+~]|"+da+")"+da+"*"),la=new RegExp("="+da+"*([^\\]'\"]*?)"+da+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+ea+")"),CLASS:new RegExp("^\\.("+ea+")"),TAG:new RegExp("^("+ea+"|[*])"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+da+"*(even|odd|(([+-]|)(\\d*)n|)"+da+"*(?:([+-]|)"+da+"*(\\d+)|))"+da+"*\\)|)","i"),bool:new RegExp("^(?:"+ca+")$","i"),needsContext:new RegExp("^"+da+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+da+"*((?:-\\d)?\\d*)"+da+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=new RegExp("\\\\([\\da-f]{1,6}"+da+"?|("+da+")|.)","ig"),va=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},wa=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xa=function(a,b){return b?"\0"===a?"":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},ya=function(){H()},za=p(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{_.apply(Y=aa.call(Q.childNodes),Q.childNodes),Y[Q.childNodes.length].nodeType}catch(a){_={apply:Y.length?function(a,b){$.apply(a,aa.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}x=c.support={},A=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},H=c.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:Q;return d!==I&&9===d.nodeType&&d.documentElement?(I=d,J=I.documentElement,K=!A(I),Q!==I&&(c=I.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",ya,!1):c.attachEvent&&c.attachEvent("onunload",ya)),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(I.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=ra.test(I.getElementsByClassName),x.getById=f(function(a){return J.appendChild(a).id=P,!I.getElementsByName||!I.getElementsByName(P).length}),x.getById?(y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}},y.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&K){var c=b.getElementById(a);return c?[c]:[]}}):(y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},y.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&K){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),y.find.TAG=x.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):x.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.CLASS=x.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&K)return b.getElementsByClassName(a)},M=[],L=[],(x.qsa=ra.test(I.querySelectorAll))&&(f(function(a){J.appendChild(a).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+da+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||L.push("\\["+da+"*(?:value|"+ca+")"),a.querySelectorAll("[id~="+P+"-]").length||L.push("~="),a.querySelectorAll(":checked").length||L.push(":checked"),a.querySelectorAll("a#"+P+"+*").length||L.push(".#.+[+~]")}),f(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=I.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&L.push("name"+da+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),J.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),L.push(",.*:")})),(x.matchesSelector=ra.test(N=J.matches||J.webkitMatchesSelector||J.mozMatchesSelector||J.oMatchesSelector||J.msMatchesSelector))&&f(function(a){x.disconnectedMatch=N.call(a,"*"),N.call(a,"[s!='']:x"),M.push("!=",ga)}),L=L.length&&new RegExp(L.join("|")),M=M.length&&new RegExp(M.join("|")),b=ra.test(J.compareDocumentPosition),O=b||ra.test(J.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},W=b?function(a,b){if(a===b)return G=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!x.sortDetached&&b.compareDocumentPosition(a)===c?a===I||a.ownerDocument===Q&&O(Q,a)?-1:b===I||b.ownerDocument===Q&&O(Q,b)?1:F?ba(F,a)-ba(F,b):0:4&c?-1:1)}:function(a,b){if(a===b)return G=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],i=[b];if(!e||!f)return a===I?-1:b===I?1:e?-1:f?1:F?ba(F,a)-ba(F,b):0;if(e===f)return h(a,b);for(c=a;c=c.parentNode;)g.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;g[d]===i[d];)d++;return d?h(g[d],i[d]):g[d]===Q?-1:i[d]===Q?1:0},I):I},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==I&&H(a),b=b.replace(la,"='$1']"),x.matchesSelector&&K&&!V[b+" "]&&(!M||!M.test(b))&&(!L||!L.test(b)))try{var d=N.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return c(b,I,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==I&&H(a),O(a,b)},c.attr=function(a,b){(a.ownerDocument||a)!==I&&H(a);var c=y.attrHandle[b.toLowerCase()],d=c&&X.call(y.attrHandle,b.toLowerCase())?c(a,b,!K):void 0;return void 0!==d?d:x.attributes||!K?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},c.escape=function(a){return(a+"").replace(wa,xa)},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(G=!x.detectDuplicates,F=!x.sortStable&&a.slice(0),a.sort(W),G){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return F=null,a},z=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=z(b);return c},y=c.selectors={cacheLength:50,createPseudo:e,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[3]||a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=B(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ua,va).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=T[a+" "];return b||(b=new RegExp("(^|"+da+")"+a+"("+da+"|$)"))&&T(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:!b||(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===b&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[P]||(m[P]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===R&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[R,n,t];break}}else if(s&&(m=b,l=m[P]||(m[P]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===R&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[P]||(m[P]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[R,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var d,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[P]?f(b):f.length>1?(d=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=ba(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(ia,"$1"));return d[P]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return a=a.replace(ua,va),function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return na.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do if(c=K?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===J},focus:function(a){return a===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:k(!1),disabled:k(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[c<0?c+b:c]}),even:l(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:l(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},y.pseudos.nth=y.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);n.prototype=y.filters=y.pseudos,y.setFilters=new n,B=c.tokenize=function(a,b){var d,e,f,g,h,i,j,k=U[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){d&&!(e=ja.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in y.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):U(a,i).slice(0)},C=c.compile=function(a,b){var c,d=[],e=[],f=V[a+" "];if(!f){for(b||(b=B(a)),c=b.length;c--;)f=u(b[c]),f[P]?d.push(f):e.push(f);f=V(a,v(e,d)),f.selector=a}return f},D=c.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&B(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&K&&y.relative[f[1].type]){if(b=(y.find.ID(g.matches[0].replace(ua,va),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ua,va),ta.test(f[0].type)&&m(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&o(f),!a)return _.apply(c,d),c;break}}return(j||C(a,k))(d,b,!K,c,!b||ta.test(a)&&m(b.parentNode)||b),c},x.sortStable=P.split("").sort(W).join("")===P,x.detectDuplicates=!!G,H(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(I.createElement("fieldset"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(ca,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});var Aa=a.Sizzle;c.noConflict=function(){return a.Sizzle===c&&(a.Sizzle=Aa),c},"function"==typeof define&&define.amd?define(function(){return c}):"undefined"!=typeof b&&b.exports?b.exports=c:a.Sizzle=c}(window)},{}],7:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],8:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],9:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(d<0)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)D(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),D(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var E=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(E,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),h=d[c];c<f;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation,g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var F,G={};c.debuglog=function(a){if(v(F)&&(F=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!G[a])if(new RegExp("\\b"+a+"\\b","i").test(F)){b.pid;G[a]=function(){c.format.apply(c,arguments)}}else G[a]=function(){};return G[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");c.log=function(){},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":8,_process:5,inherits:7}],10:[function(a,b,c){"use strict";var d=a("bluebird"),e=a("model/VastAd"),f=a("model/VASTEvent"),g=a("model/VPAIDEvent"),h=a("creative/VPAIDCreative"),i=a("creative/VPAIDLinearWrapper"),j=a("bus/BusEvents"),k=a("bus/BusEmitter"),l=a("model/VASTPixelStore"),m=a("forensics/GhostProtocol"),n=b.exports=function(a,b,c,n,o){function p(b){var c,f;return(f=b.match(/\.(mp4|webm)$/))?(x=new i({uri:b,id:a.creativeId,type:"video/"+f[1],delivery:"progressive",bitrate:1400},a.clickthrough),x.setAdVolume(G),x.handshakeVersion("2.0"),c=d.resolve(x)):c=new e(b,a.alternate).resolve().then(q),c}function q(c){D.addVastPixels(c.getAllTrackingPixels());var e=c.getClickThroughs();e.length?B=e[0]:a.clickthrough&&(B=a.clickthrough);var f=c.selectMediaFile(720);if(f&&(f.price&&b.sendRealSoon("SALE",1e3*parseFloat(f.price)),f.adTitle&&b.sendRealSoon("STR2TEST",f.adTitle),f.apiFramework&&"vpaid"===f.apiFramework.toLowerCase()?(x=new h(f,n),y={AdParameters:f.adParameters}):f.type&&i.canPlayType(f.type)&&(x=new i(f,B),y={AdParameters:""}),x))return x.setAdVolume(G),x.handshakeVersion("2.0"),d.resolve(x);throw new Error("No creatives could be found.")}function r(){var a=Number(D.duration),b=Number(D.playPosition);b===b&&b>=0&&s(Math.floor(b/a*100))}function s(a){for(a>=99&&(a=100);H.length>0&&a>=H[0];){var c=H.shift();switch(b.sendRealSoon({TV2NPCPY:c}),c){case 25:D.emit(j.VPAID_EVENT,g.AdVideoFirstQuartile),D.emit(j.VAST_EVENT,f.FIRST_QUARTILE);break;case 50:D.emit(j.VPAID_EVENT,g.AdVideoMidpoint),D.emit(j.VAST_EVENT,f.MIDPOINT);break;case 75:D.emit(j.VPAID_EVENT,g.AdVideoThirdQuartile),D.emit(j.VAST_EVENT,f.THIRD_QUARTILE);break;case 100:D.emit(j.VPAID_EVENT,g.AdVideoComplete),D.emit(j.VAST_EVENT,f.COMPLETE)}}}function t(){C||(C=setInterval(r,100))}function u(){C&&clearInterval(C)}function v(){var a=arguments[0];switch(a){case g.AdClickThru:b.sendRealSoon({CLK:1,TV2NCURL:arguments[1],TV2NCKCT:++F}),D.emit(j.VAST_EVENT,f.CLICKTRACK);break;case g.AdImpression:b.send({ADEVENT:"IMPRESSION",TV2NBTST:"ADPLAYED",SNDLEVEL:Math.max(Math.round(100*x.getAdVolume()),0)}),D.emit(j.VAST_EVENT,f.IMPRESSION);break;case g.AdStarted:b.send({ADEVENT:"START",TV2NBTST:"STARTED"}),D.emit(j.VAST_EVENT,f.CREATIVE_VIEW);break;case g.AdVideoStart:b.send({ADEVENT:"VIDEOSTART",TV2NBTST:"VIDEOSTARTED",TV2NPCPY:0}),t(),D.emit(j.VAST_EVENT,f.START);break;case g.AdVideoFirstQuartile:return s(25);case g.AdVideoMidpoint:return s(50);case g.AdVideoThirdQuartile:return s(75);case g.AdVideoComplete:return b.sendRealSoon({ADEVENT:"END",TV2NBTST:"ENDED"}),s(100);case g.AdStopped:u();break;case g.AdVolumeChange:G=x.getAdVolume(),b.send({SNDLEVEL:Math.round(100*G)})}switch(arguments.length){case 1:D.emit(j.VPAID_EVENT,a);break;case 2:D.emit(j.VPAID_EVENT,a,arguments[1]);break;case 3:D.emit(j.VPAID_EVENT,a,arguments[1],arguments[2]);break;case 4:D.emit(j.VPAID_EVENT,a,arguments[1],arguments[2],arguments[3]);break;default:var c=Array.prototype.slice.call(arguments);c.unshift(j.VPAID_EVENT),D.emit.apply(D,c)}}function w(a){return c.promiseFlags(a,b)}k.call(this);var x,y,z,A,B,C,D=this,E=new l(n,o),F=0,G=1,H=[25,50,75,100];Object.defineProperties(D,{tracking:{get:function(){return b}},width:{get:function(){return x.getAdWidth()}},height:{get:function(){return x.getAdHeight()}},duration:{get:function(){return x.getAdDuration()}},volume:{get:function(){return G},set:function(a){G=a,x&&x.setAdVolume(a)}},playPosition:{get:function(){var a=x.getAdRemainingTime(),b=x.getAdDuration();return a===a&&b===b&&b>0&&a>=0?b-a:-2}},creativeId:{get:function(){return a.creativeId}},config:{get:function(){return a}},pixelStore:{get:function(){return E}}}),D.on(j.VAST_EVENT,E.emit.bind(E,j.VAST_EVENT)),D.addVastPixel=function(a,b){E.addPixel(a,b)},D.addVastPixels=function(a){for(var b in a)for(var c=a[b],d=0;d<c.length;d++)E.addPixel(b,c[d])},D.initWrappedCreative=function(c,d,e,f){function g(a){return p(a).then(function(a){return b.sendRealSoon("TV2NBTST","INITAD"),a.on(j.VPAID_EVENT,v),a.initAd(c,d,"normal",1400,y,{slot:e,videoSlot:f})})}return b.flushQueue(),z=e,A=f,b.sendRealSoon("TV2NSIZE",c+"V"+d),n?n.format(a.vastPath).then(g):g(a.vastPath)},D.startWrappedCreative=function(){return w(a).then(function(){return b.sendRealSoon("TV2NBTST","STARTAD"),x.startAd()}).catch(function(a){throw a instanceof m.RejectionError&&E.emit(j.GHOST_CODE,a.ghostCode),a})},D.stop=function(){x.stopAd()},D.resize=function(a,b){x.resizeAd(a,b,"normal")},D.pause=function(){x.pauseAd()},D.resume=function(){x.resumeAd()},D.free=function(){x.free()}};k.recruit(n)},{bluebird:1,"bus/BusEmitter":14,"bus/BusEvents":15,"creative/VPAIDCreative":19,"creative/VPAIDLinearWrapper":20,"forensics/GhostProtocol":27,"model/VASTEvent":32,"model/VASTPixelStore":34,"model/VPAIDEvent":36,"model/VastAd":37}],11:[function(a,b,c){"use strict";var d=a("ad/AdPlaylist"),e=(a("model/VastAd"),a("creative/VPAIDCreative"),a("creative/VPAIDLinearWrapper"),a("bus/Bus")),f=a("bus/BusEvents"),g=a("bus/BusEmitter"),h=(a("model/Tracking"),a("model/VASTEvent")),i=(a("model/VPAIDEvent"),a("extension/extensions"),a("forensics/GhostProtocol")),j=a("forensics/Geo"),k=a("forensics/Toxic"),l=a("utils/getRealReferrer"),m=a("utils/getOriginReferrer"),n=(a("utils/promiseDefer"),a("utils/forceProtocol")),o=(a("utils/rand63"),a("utils/extend")),p=a("bluebird"),q=(a("utils/promiseGet"),b.exports=function(b){function c(a){I=new d(a,H,K),I.on(d.quartile,t),I.on(d.stopped,u),I.on(d.paused,v),I.on(d.resumed,w),I.on(d.sizeChange,x),I.on(d.clicked,A),I.on(d.volumeChange,y),I.on(d.durationChange,z),I.on(d.error,B),I.volume=M}function q(){I&&(I.off(d.quartile,t),I.off(d.stopped,u),I.off(d.paused,v),I.off(d.resumed,w),I.off(d.sizeChange,x),I.off(d.clicked,A),I.off(d.volumeChange,y),I.off(d.durationChange,z),I.off(d.error,B))}function r(){return b.send("TV2NBTST","STARTAD"),I.start()}function s(){J=Date.now(),b.send({ADEVENT:"IMPRESSION",TV2NBTST:"ADPLAYED"})}function t(a){switch(b.send({TV2NPCPY:a}),a){case 25:F.emit(f.VAST_EVENT,h.FIRST_QUARTILE);break;case 50:F.emit(f.VAST_EVENT,h.MIDPOINT);break;case 75:F.emit(f.VAST_EVENT,h.THIRD_QUARTILE);break;case 100:F.emit(f.VAST_EVENT,h.COMPLETE)}}function u(){b.send("TV2NBTST","STOPPED"),F.free(),F.emit("stopped")}function v(){F.emit("paused")}function w(){F.emit("resumed")}function x(a,b){H.width=a,H.height=b,F.emit("resized",a,b)}function y(){M=F.volume,F.emit("volumeChanged",F.volume)}function z(){F.emit("durationChanged")}function A(a,b){F.emit("clicked",n(L,a),"1",b)}function B(a){F.emit("error",a)}function C(a){(new Image).src=n(L,"http://idsync.rlcdn.com/385006.gif?partner_uid="+a),(new Image).src=n(L,"http://tags.bluekai.com/site/20860?id="+a),(new Image).src=n(L,"http://sync.search.spotxchange.com/partner?adv_id=7284&uid="+a),(new Image).src=n(L,"http://sync.adap.tv/sync?key=telemetry&uid="+a)}function D(a){var b=null;if(a===!0&&(b="https:"),null===b){var c,d=location.href;"string"==typeof d&&(c=d.match(/^(https?)/))&&(b=c[1]+":")}return null===b&&(b="https:"),b}function E(b,c){var d={videoSlot:c.videoSlot,slot:c.slot,tracking:b,bus:e};a("sensors/IFrame")(d)}var F=this;g.call(this);var G,H,I,J,K,L,M=1;e.on(f.AD_PLAYED,function(a){b.send("TV2NISID",a.tracking.sessionId)}),this.configure=function(a,d){G=a,H=d,H.parentSession=b.sessionId,b.setQuery({price:G.marketPrice||"",bid:G.bidPrice||"",ratio:G.ratio||"",referrer:G.siteUrl?G.siteUrl.replace(/\?.*$/,""):""});var e={JAVASREN:"ENABLED",PVER:"html5/master/27adec9",PTYPE:"js",BLUEPUB:G.publisherId,EXCH:G.exchangeName,BIDIP:G.ipAddress,BIDRAGT:G.bidUserAgent,PROVIDER:G.provider,BUNDLEID:G.bundle,BOOTMODE:H.bootmode,TV2NSIZE:H.width+"V"+H.height,TV2NBTST:"CONFIGURED"};G.buyerDealId&&(e.DLBUYID=G.buyerDealId),b.send(e),b.send({PSJSREF:G.siteUrl,PSJSTREF:l(G.siteUrl),ORIGINRF:m()}),K=new i(G,H),L=D(G.impressionSecure),H.useProtocol=L,G.userCookie.then(C),E(b,H);var f=new k,g=new j(b.getSpikeDomain,G.ipAddress,G.siteUrl,{SOURCEID:"119",SID:b.sessionId,SIDTIM:(new Date).valueOf(),PVER:"html5/master/27adec9",TV2NSPID:"BNQiMpjaBOpM",ADCGUID:"Blx9fZQVjj)U",ITM:b.reserveItem()});return p.all([f.promiseOutcome().reflect(),g.promiseOutcome().reflect()]).spread(function(a,c){var d=0,e={};if(a.isRejected()&&(d|=a.reason().ghostCode,o(e,a.reason().data)),c.isRejected()&&(d|=c.reason().ghostCode,o(e,c.reason().data)),d>0)throw e.GPREJECT=d,e.TV2NBTST="ABORTED",b.send(e),new Error("Ad unit failed to load")}).then(function(){return c(G),!0})},this.resize=function(a,b){I&&I.resize(a,b)},this.start=function(){return r().then(s).catch(function(a){throw a instanceof i.RejectionError?b.send("GPREJECT",a.ghostCode):b.send("GPREJECT",i.REJECT_REASON_ABORTED),new Error("Ad unit failed to load")})},this.stop=function(){I&&I.stop()},this.pause=function(){I&&I.pause()},this.resume=function(){I&&I.resume()},this.free=function(){try{q(),I&&(I.stop(),I.free())}catch(a){}},Object.defineProperties(this,{volume:{get:function(){return M},set:function(a){M=Math.min(1,Math.max(0,a)),I&&(I.volume=M)}},width:{get:function(){return I.width}},height:{get:function(){return I.height}},duration:{get:function(){return I.duration}},playPosition:{get:function(){return I.playPosition}},companions:{get:function(){return""}}})});g.recruit(q)},{"ad/AdPlaylist":12,bluebird:1,"bus/Bus":13,"bus/BusEmitter":14,"bus/BusEvents":15,"creative/VPAIDCreative":19,"creative/VPAIDLinearWrapper":20,"extension/extensions":21,"forensics/Geo":26,"forensics/GhostProtocol":27,"forensics/Toxic":29,"model/Tracking":31,"model/VASTEvent":32,"model/VPAIDEvent":36,"model/VastAd":37,"sensors/IFrame":40,"utils/extend":45,"utils/forceProtocol":46,"utils/getOriginReferrer":48,"utils/getRealReferrer":49,"utils/promiseDefer":55,"utils/promiseGet":56,"utils/rand63":58}],12:[function(a,b,c){"use strict";var d=(a("bluebird"),a("model/VPAIDEvent")),e=a("model/Tracking"),f=a("model/VASTEvent"),g=a("ad/AdCreative"),h=a("bus/Bus"),i=a("bus/BusEvents"),j=a("bus/BusEmitter"),k=a("forensics/GhostProtocol"),l=(a("model/VASTPixelStore"),a("utils/parseDomain")),m=a("utils/getRealReferrer"),n=a("utils/getOriginReferrer"),o=a("utils/buildQueryLike"),p=a("utils/forceProtocol"),q=a("net/UrlFormatter"),r=a("net/Comscore"),s=a("utils/rand63"),t=a("utils/extend"),u=a("extension/extensions"),v=b.exports=function b(c,v,w){function x(){F=[];for(var a=0;a<c.creatives.length;a++)F.push(y(c.creatives[a],c,w))}function y(a,b,c){function d(a){var c;return c=b.napkinConfig&&b.napkinConfig[a]?t({},B,b.napkinConfig[a]):B,c.k=a,A+o(c,"&","=",encodeURIComponent)}var h=new e(a.spikeDomain,b.item);h.startQueue(),h.always({SOURCEID:b.sourceId,SIDTIM:b.sidtim,PVER:"html5/master/27adec9",SID:a.sessionId,TV2NSPID:a.tv2nspid,ADCGUID:a.adcguid,BLUEPO:a.po,BLUEPS:a.ps,BLUECRTV:a.creativeId}),h.setQuery({price:b.marketPrice||"",bid:b.bidPrice||"",ratio:b.ratio||"",referrer:b.siteUrl?b.siteUrl.replace(/\?.*$/,""):""});var i={JAVASREN:"ENABLED",PTYPE:"js",BLUEORV:a.revisionId,BLUEPUB:b.publisherId,EXCH:b.exchangeName,
BIDRAGT:b.bidUserAgent,PROVIDER:b.provider,BUNDLEID:b.bundle,BOOTMODE:v.bootmode,PSID:v.parentSession,TV2NBTST:"ADDED"};b.buyerDealId&&(i.DLBUYID=b.buyerDealId),h.send(i);var j={YOLOVAST:a.vastPath,PSJSREF:b.siteUrl,PSJSTREF:m(),ORIGINRF:n()};h.send(j);var k=new q;k.addSubstitution(/%n|\[RANDOM_NUMBER\]|\[timestamp\]|%%REALRAND%%|%%CACHEBUSTER%%/gi,s()),k.addSubstitution(/\[width\]|%gw/gi,v.width),k.addSubstitution(/\[height\]|%gh/gi,v.height),k.addSubstitution(/\[referr?er\]|%r/gi,l(b.siteUrl)),k.addSubstitution(/\[impid\]|\[impressionid\]|\[uniqueid\]/gi,a.sessionId),k.addSubstitution(/\[crid\]|\[creativeid\]/gi,a.creativeId),k.addSubstitution(/\[ip\]|\[ipAddress\]/gi,b.ipAddress),k.addSubstitution(/\[ua\]|\[userAgent\]/gi,b.bidUserAgent),k.addSubstitution(/%k|\[cookie\]/gi,b.userCookie),k.addCustomStep(p.bind(null,v.useProtocol));var u=new r(v.useProtocol,a.creativeId,a.po,v.width,v.height),w=new g(a,h,c,k,u);if(a.cookiePixels&&b.userCookie.then(function(b){for(var c=0;c<a.cookiePixels.length;c++){var d=a.cookiePixels[c];k.format(u.expand(d)).then(function(a){(new Image).src=a})}}),a.tpp)for(var x in a.tpp)for(var y=a.tpp[x],z=0;z<y.length;z++)w.addVastPixel(x,y[z]);var A=v.useProtocol+"//ad.tekblue.net/n?",B={e:b.exchangeId,p:a.po,r:a.ps,c:a.creativeId,v:"html5/master/27adec9",s:a.sessionId};return w.addVastPixel(f.CREATIVE_VIEW,d("i")),w.addVastPixel(f.IMPRESSION,d("I")),w.addVastPixel(f.START,d("0")),w.addVastPixel(f.FIRST_QUARTILE,d("1")),w.addVastPixel(f.MIDPOINT,d("2")),w.addVastPixel(f.THIRD_QUARTILE,d("3")),w.addVastPixel(f.COMPLETE,d("4")),w.addVastPixel(f.CLICKTRACK,d("C")),w}function z(a){var b=a.shift();return b.initWrappedCreative(v.width,v.height,v.slot,v.videoSlot).then(function(){b.volume=I,E(b,v)}).then(b.startWrappedCreative).then(function(){return A(b)}).catch(function(c){try{B(b)}catch(a){}try{b.stop()}catch(a){}try{b.free()}catch(a){}if(c instanceof k.RejectionError)b.tracking.send({DEBUGMSG:"GHOSTPROTOCOL",GPREJECT:c.ghostCode});else{var d;c?(d=c.message||c.constructor.name,c.stack&&(d+=" "+c.stack.split(/\n/)[1].replace(/\(.*\)/,"")),d.indexOf("CORS request rejected")>-1&&Math.random()>.005&&(d="CORS request rejected")):d="Unknown creative failure",b.tracking.send({DEBUGMSG:d,GPREJECT:k.REJECT_REASON_ABORTED})}if(0===a.length)throw new Error("No creatives available!");return z(a)})}function A(a){return a.on(i.VPAID_EVENT,C),a}function B(a){return a.removeListener(i.VPAID_EVENT,C),a}function C(a){switch(a){case d.AdVideoStart:H.emit(b.quartile,0);break;case d.AdVideoFirstQuartile:H.emit(b.quartile,25);break;case d.AdVideoMidpoint:H.emit(b.quartile,50);break;case d.AdVideoThirdQuartile:H.emit(b.quartile,75);break;case d.AdVideoComplete:H.emit(b.quartile,100);break;case d.AdStopped:H.emit(b.stopped);break;case d.AdPaused:H.emit(b.paused);break;case d.AdPlaying:H.emit(b.resumed);break;case d.AdSizeChange:H.emit(b.sizeChange,G.width,G.height);break;case d.AdClickThru:H.emit(b.clicked,arguments[1],arguments[3]);break;case d.AdVolumeChange:I=G.volume,H.emit(b.volumeChange,G.volume);break;case d.AdError:H.emit(b.error,arguments[1]);break;case d.AdDurationChange:H.emit(b.durationChange)}}function D(a,b,c){if(c.config.extensions)try{var e=u.configure(a,b,c.config,b.slot,function(){try{return c.duration}catch(a){return-2}},function(){try{return c.volume}catch(a){return 1}});c.tracking.sendRealSoon("EXTENBL",e),u.notifyEvent([d.AdLoaded]),u.notifyEvent([d.AdStarted]),u.notifyEvent([d.AdVideoStart]),u.notifyEvent([d.AdImpression]),c.on(i.VPAID_EVENT,function(){u.notifyEvent(arguments)})}catch(a){}}function E(b,c){var d={videoSlot:c.videoSlot,slot:c.slot,tracking:b.tracking,bus:h,creative:b};a("sensors/IFrame")(d),a("sensors/Viewability")(d)}j.call(this);var F,G,H=this,I=1;H.start=function(){return z(F).then(function(a){G=a,h.emit(i.AD_PLAYED,G),D(c,v,a)})},H.stop=function(){G&&G.stop()},H.resize=function(a,b){G&&G.resize(a,b)},H.pause=function(){G&&G.pause()},H.resume=function(){G&&G.resume()},H.free=function(){G&&(G.free(),h.emit(i.FREE,G))},Object.defineProperties(H,{volume:{get:function(){return I},set:function(a){I=a,G&&(G.volume=a)}},width:{get:function(){return G.width}},height:{get:function(){return G.height}},duration:{get:function(){return G.duration}},playPosition:{get:function(){return G.playPosition}},companions:{get:function(){return""}},creatives:{get:function(){return F}}}),x()};v.quartile="AdPlaylist.quartile",v.stopped="AdPlaylist.stopped",v.paused="AdPlaylist.paused",v.resumed="AdPlaylist.resumed",v.sizeChange="AdPlaylist.resized",v.clicked="AdPlaylist.clicked",v.durationChange="AdPlaylist.durationChange",v.volumeChange="AdPlaylist.volumeChange",v.error="AdPlaylist.error",j.recruit(v)},{"ad/AdCreative":10,bluebird:1,"bus/Bus":13,"bus/BusEmitter":14,"bus/BusEvents":15,"extension/extensions":21,"forensics/GhostProtocol":27,"model/Tracking":31,"model/VASTEvent":32,"model/VASTPixelStore":34,"model/VPAIDEvent":36,"net/Comscore":38,"net/UrlFormatter":39,"sensors/IFrame":40,"sensors/Viewability":42,"utils/buildQueryLike":44,"utils/extend":45,"utils/forceProtocol":46,"utils/getOriginReferrer":48,"utils/getRealReferrer":49,"utils/parseDomain":52,"utils/rand63":58}],13:[function(a,b,c){"use strict";var d=a("bus/BusEmitter"),e=function(){d.call(this)};d.recruit(e),b.exports=new e},{"bus/BusEmitter":14}],14:[function(a,b,c){"use strict";var d=a("events").EventEmitter,e=a("util").inherits,f=b.exports=function(){d.call(this)};e(f,d),f.prototype.emitNextTick=function(){var a=this,b=arguments;setTimeout(function(){switch(b.length){case 1:a.emit(b[0]);break;case 2:a.emit(b[0],b[1]);break;case 3:a.emit(b[0],b[1],b[2]);break;default:a.emit.apply(a,b)}},0)},f.prototype.off=f.prototype.removeListener,f.recruit=function(a){e(a,f)}},{events:3,util:9}],15:[function(a,b,c){"use strict";b.exports={AD_PLAYED:"adPlayed",VAST_EVENT:"vastEvent",VPAID_EVENT:"vpaidEvent",OUTGOING_PIXEL:"outgoingPixel",CREATIVE_CLICK:"creativeClick",IS_VIEWABLE:"isViewable",GHOST_CODE:"ghostCode",CONFIG:"config",FREE:"free"}},{}],16:[function(a,b,c){"use strict";function d(a,b){if(b.z&&(a.sidtim=b.z),b.i&&(a.item=parseInt(b.i,10)),b.m&&(a.startMuted=k(b.m)),b.k&&(a.clickthrough=i(b.k)),b.j&&(a.siteUrl=i(b.j)),b.b&&(a.baseDomain=i(b.b).replace(/\/?$/,"/")),b.y&&(a.thenVideo=i(b.y)),b.S){var c=parseInt(b.S,10);c===c&&(a.sourceId=c)}b.x&&(a.exchangeId=b.x),b.e&&(a.exchangeName=l.decode(b.e)),b.Q&&(a.marketPrice=i(b.Q)),b.P&&(a.bidPrice=i(b.P)),b.q&&(a.ratio=i(b.q)),b.Y&&(a.queryString=j(l.decode(b.Y))),b.I&&(a.ipAddress=b.I),b.E&&(a.bidUserAgent=i(b.E)),b.f&&(a.publisherId=l.decode(b.f)),b.g&&(a.provider=l.decode(b.g)),b.U?a.userCookie=n.resolve(b.U):a.userCookie=o("https://cs.tekblue.net/u/map.txt").spread(function(a,b){return b}),b.B&&(a.bundle=l.decode(b.B)),b.napkinConfig&&(a.napkinConfig=b.napkinConfig)}function e(a){"string"==typeof a&&(a=f(a));var b={tv2nspid:null,adcguid:null,clickthrough:null,ghostFlags:null,vastPath:null,customerId:null,spikeDomain:null,sessionId:null,creativeId:null,revisionId:null,ps:null,po:null,tpp:null,extensions:null,cookiePixels:null,alternate:null};a.t&&(b.tv2nspid=i(a.t)),a.a&&(b.adcguid=i(a.a)),a.k&&(b.clickthrough=i(a.k)),a.G&&(b.ghostFlags=a.G),a.v&&(b.vastPath=i(a.v)),a.W&&(b.customerId=a.W),a.d&&(b.spikeDomain=i(a.d));var c=m(a.s);if(c.dmc&&(b.spikeDomain?b.spikeDomain=b.spikeDomain.replace(/^(\w+:\/\/)[^.]*/,"$1"+c.dmc+"--dmc"):"https://"+c.dmc+"--dmc.tekblue.net"),a.s&&(b.sessionId=a.s),a.C&&(b.creativeId=a.C),a.O&&(b.revisionId=a.O),a.r&&(b.ps=a.r),a.p&&(b.po=a.p),a.X&&(b.extensions=i(a.X)),a.A&&(b.alternate=l.decode(a.A)),a.Z){for(var d={},e=[],h=a.Z.split("____"),j=0;j<h.length;j++){var k,n=h[j],o=n.substr(0,1),q=l.decode(n.substr(1));switch(o){case"I":k=g(p.IMPRESSION,d);break;case"i":k=g(p.CREATIVE_VIEW,d);break;case"0":k=g(p.START,d);break;case"1":k=g(p.FIRST_QUARTILE,d);break;case"2":k=g(p.MIDPOINT,d);break;case"3":k=g(p.THIRD_QUARTILE,d);break;case"4":k=g(p.COMPLETE,d);break;case"C":k=g(p.CLICKTRACK,d);break;case"k":k=g("cookie",d);break;case"G":var r=n.match(/^G([0-9]+)/);if(!r)continue;o+=r[1],q=l.decode(q.substr(r[1].length)),k=e;break;default:continue}k.push(q)}b.tpp=d,b.cookiePixels=e}return b.tpp&&a.T&&g(p.CLICKTRACK,b.tpp).push(i(a.T)),Object.freeze(b)}function f(a){var b=a.charAt(0);return"{"===b||"["===b?JSON.parse(a):j(a,"&","=",i)}function g(a,b){return a in b||(b[a]=[]),b[a]}var h=a("utils/extend"),i=a("utils/multiDecode"),j=a("utils/parseQueryLike"),k=a("utils/parseBoolean"),l=a("utils/pse1"),m=a("config/DmcConfig"),n=a("bluebird"),o=a("utils/promiseGet"),p=a("model/VASTEvent"),q=b.exports=function(a){var b=this;for(var c in a)!function(a,c){Object.defineProperty(b,a,{enumerable:!0,configurable:!1,writable:!1,value:c})}(c,a[c])};q.fromString=function(a){if("string"!=typeof a)throw new Error("Parameter must be of type string (got "+Object.prototype.toString.call(a)+")");var b=f(a),c={impressionSecure:null,bundle:null,sidtim:null,item:null,startMuted:null,siteUrl:null,baseDomain:null,thenVideo:null,sourceId:null,exchangeId:null,exchangeName:null,marketPrice:null,bidPrice:null,ratio:null,queryString:null,ipAddress:null,bidUserAgent:null,extensions:null,publisherId:null,provider:null,realUrl:null,userCookie:null,buyerDealId:null,protocol:null,creatives:[],napkinConfig:null};if(b.legacyConfig){var g=f(b.legacyConfig);delete b.legacyConfig,h(g,b),b=g}d(c,b);for(var i in c)i in b&&(c[i]=b[i]);var j=e(b);if(j&&c.creatives.push(j),b.alternateConfig){var k=e(b.alternateConfig);k&&c.creatives.push(k)}return Object.freeze(new q(c))}},{bluebird:1,"config/DmcConfig":17,"model/VASTEvent":32,"utils/extend":45,"utils/multiDecode":50,"utils/parseBoolean":51,"utils/parseQueryLike":53,"utils/promiseGet":56,"utils/pse1":57}],17:[function(a,b,c){"use strict";var d=a("utils/parseQueryLike"),e=a("utils/multiDecode"),f={},g=!1;b.exports=function(a){if(g)return f;var b;if(document.currentScript&&document.currentScript.src&&(b=document.currentScript.src),!b&&a){var c=document.getElementById("dmc"+a);c&&c.src&&(b=c.src),c=void 0}if(b){var h=b.indexOf("?");if(h!==-1){b=b.substr(h+1);var i=d(b);i.dmc&&/^\d+$/.test(i.dmc)&&(f.dmc=parseInt(i.dmc,10)),i.js&&(f.js=e(i.js))}g=!0}return f}},{"utils/multiDecode":50,"utils/parseQueryLike":53}],18:[function(a,b,c){"use strict";var d=a("external-forensics/mapping-module");b.exports=function(a,b,c,e,f){function g(){if(4==this.readyState){if(200!=this.status&&304!=this.status)return void o.sendRealSoon({DEBUGMSG:"FORENSICS "+this.responseURL+": "+this.statusText+" ("+this.status+")"});if(null===this.responseText)return void o.sendRealSoon({DEBUGMSG:"FORENSICS "+this.responseURL+": 'null' responseText"});try{new Function("var SENDPSDATA = arguments[0], EVENTLISTEN = arguments[1], EVENTDISPATCH = arguments[2], UNIT = arguments[3];\n"+this.responseText)(h,i,j,k)}catch(a){o.sendRealSoon({DEBUGMSG:"FORENSICS "+this.responseURL+": "+a.message})}}}function h(a,b,c){if(o){b&&(a.ts=(new Date).getTime());for(var d in a){var e=a[d];delete a[d],a[d.toUpperCase()]=e}c?o.send(a):o.sendRealSoon(a)}}var i,j,k=e,l="cdn.tekblue.net",m={},n=[],o=c,p=f.js;if(p&&c){var q=p.split(","),r=document.createElement("a");r.href=a.baseDomain,f.dmc&&(l=f.dmc+"--dmc.tekblue.net"),l=r.protocol+"//"+l;var s={};s.cdn=l,s.playerURL=l,s.sid=b;for(var t=0;t<q.length;t++){var u=new XMLHttpRequest;u.open("GET",l+"/"+q[t],!0),u.onreadystatechange=g,u.send()}i=function(a,b,c){if(0!==c){if(m[a]){for(var d=m[a].length;d-- >0;)if(m[a][d]===b)return;m[a].push(b)}else m[a]=[b];var d=n.length;for(c===-1&&(c=d);d-- >0&&c>0;)if(n[d][0]===a){try{b(n[d][1])}catch(a){o.sendRealSoon({DEBUGMSG:"[FORENSINCS] listen dispatch: "+a.message})}c--}}else if(m[a])for(var d=m[a].length;d-- >0;)if(m[a][d]===b)return void(m[a][d]=function(){})},this.EVENTDISPATCH=j=function(a,b){if(a){b=b||{},n.push([a,b]);for(var c=m[a]?m[a].length:0;c-- >0;)try{m[a][c](b)}catch(a){o.sendRealSoon({DEBUGMSG:"[FORENSINCS] dispatch: "+a.message})}}},this.events={AdStopped:d.EVENT_forensics_stop,AdStarted:d.EVENT_vpaid_adstarted,AdImpression:d.EVENT_vpaid_adimpression,AdVideoFirstQuartile:d.EVENT_vpaid_advideofirstquartile,AdVideoMidPoint:d.EVENT_vpaid_advideomidpoint,AdVideoThirdQuartile:d.EVENT_vpaid_advideothirdquartile,AdVideoComplete:d.EVENT_vpaid_advideocomplete},j(d.EVENT_forensics_config,s)}}},{"external-forensics/mapping-module":24}],19:[function(a,b,c){"use strict";var d=a("model/VPAIDEvent"),e=a("bus/BusEvents"),f=a("bus/BusEmitter"),g=(a("events").EventEmitter,a("bluebird")),h=a("utils/promiseDefer"),i=a("utils/Semver"),j=b.exports=function(a,b){function c(){return M?g.resolve(M):b.format(a.uri).then(function(a){return new g(function(b,c){function d(){N.removeEventListener("load",d);var e=N.contentWindow,f=e.setTimeout;e.setTimeout=function(a){return a.toString().indexOf("R.TIM")!==-1?-30:f.apply(e,arguments)};var g=e.document,h=g.createElement("script");h.src=a,h.addEventListener("load",function(){try{j(M=e.getVPAIDAd()),b(M)}catch(a){c(a)}}),h.addEventListener("error",function(a){c(a.error||new Error(a.toString()))}),g.head.appendChild(h)}function e(a){c(a)}N=document.createElement("iframe"),N.width="1",N.height="1",N.allowBorder="0",N.style.visibility="hidden",N.style.border="0 none",N.addEventListener("load",d),N.addEventListener("error",e),document.body||document.write("<body></body>"),document.body.appendChild(N)})})}function j(a){a.subscribe(l,d.AdLoaded,L),a.subscribe(m,d.AdStarted,L),a.subscribe(n,d.AdStopped,L),a.subscribe(o,d.AdSkipped,L),a.subscribe(p,d.AdImpression,L),a.subscribe(q,d.AdVideoStart,L),a.subscribe(r,d.AdVideoFirstQuartile,L),a.subscribe(s,d.AdVideoMidpoint,L),a.subscribe(t,d.AdVideoThirdQuartile,L),a.subscribe(u,d.AdVideoComplete,L),a.subscribe(v,d.AdError,L),a.subscribe(w,d.AdLinearChange,L),a.subscribe(x,d.AdSizeChange,L),a.subscribe(y,d.AdExpandedChange,L),a.subscribe(z,d.AdSkippableStateChange,L),a.subscribe(A,d.AdDurationChange,L),a.subscribe(B,d.AdRemainingTimeChange,L),a.subscribe(C,d.AdVolumeChange,L),a.subscribe(D,d.AdClickThru,L),a.subscribe(E,d.AdInteraction,L),a.subscribe(F,d.AdUserAcceptInvitation,L),a.subscribe(G,d.AdUserMinimize,L),a.subscribe(H,d.AdUserClose,L),a.subscribe(I,d.AdPaused,L),a.subscribe(J,d.AdPlaying,L),a.subscribe(K,d.AdLog,L)}function k(){M&&(M.unsubscribe(l,d.AdLoaded,L),M.unsubscribe(m,d.AdStarted,L),M.unsubscribe(n,d.AdStopped,L),M.unsubscribe(o,d.AdSkipped,L),M.unsubscribe(p,d.AdImpression,L),M.unsubscribe(q,d.AdVideoStart,L),M.unsubscribe(r,d.AdVideoFirstQuartile,L),M.unsubscribe(s,d.AdVideoMidpoint,L),M.unsubscribe(t,d.AdVideoThirdQuartile,L),M.unsubscribe(u,d.AdVideoComplete,L),M.unsubscribe(v,d.AdError,L),M.unsubscribe(w,d.AdLinearChange,L),M.unsubscribe(x,d.AdSizeChange,L),M.unsubscribe(y,d.AdExpandedChange,L),M.unsubscribe(z,d.AdSkippableStateChange,L),M.unsubscribe(A,d.AdDurationChange,L),M.unsubscribe(B,d.AdRemainingTimeChange,L),M.unsubscribe(C,d.AdVolumeChange,L),M.unsubscribe(D,d.AdClickThru,L),M.unsubscribe(E,d.AdInteraction,L),M.unsubscribe(F,d.AdUserAcceptInvitation,L),M.unsubscribe(G,d.AdUserMinimize,L),M.unsubscribe(H,d.AdUserClose,L),M.unsubscribe(I,d.AdPaused,L),M.unsubscribe(J,d.AdPlaying,L),M.unsubscribe(K,d.AdLog,L))}function l(){Q.resolve()}function m(){L.emit(e.VPAID_EVENT,d.AdStarted),R.resolve()}function n(){L.emit(e.VPAID_EVENT,d.AdStopped)}function o(){L.emit(e.VPAID_EVENT,d.AdSkipped)}function p(){L.emit(e.VPAID_EVENT,d.AdImpression),T.resolve()}function q(){L.emit(e.VPAID_EVENT,d.AdVideoStart),S.resolve(),T.resolve(),R.resolve()}function r(){L.emit(e.VPAID_EVENT,d.AdVideoFirstQuartile)}function s(){L.emit(e.VPAID_EVENT,d.AdVideoMidpoint)}function t(){L.emit(e.VPAID_EVENT,d.AdVideoThirdQuartile)}function u(){L.emit(e.VPAID_EVENT,d.AdVideoComplete)}function v(a){Q.reject(new Error("Creative failed to load: "+a)),R.reject(new Error("Creative failed to load: "+a)),S.reject(new Error("Creative failed to load: "+a)),T.reject(new Error("Creative failed to load: "+a)),L.emit(e.VPAID_EVENT,d.AdError,a)}function w(){L.emit(e.VPAID_EVENT,d.AdLinearChange)}function x(){L.emit(e.VPAID_EVENT,d.AdSizeChange)}function y(){L.emit(e.VPAID_EVENT,d.AdExpandedChange)}function z(){L.emit(e.VPAID_EVENT,d.AdSkippableStateChange)}function A(){L.emit(e.VPAID_EVENT,d.AdDurationChange)}function B(){L.emit(e.VPAID_EVENT,d.AdRemainingTimeChange)}function C(){try{P=M.getAdVolume()}catch(a){}L.emit(e.VPAID_EVENT,d.AdVolumeChange)}function D(a,b,c){L.emit(e.VPAID_EVENT,d.AdClickThru,a,b,c)}function E(){L.emit(e.VPAID_EVENT,d.AdInteraction)}function F(){L.emit(e.VPAID_EVENT,d.AdUserAcceptInvitation)}function G(){L.emit(e.VPAID_EVENT,d.AdUserMinimize)}function H(){L.emit(e.VPAID_EVENT,d.AdUserClose)}function I(){L.emit(e.VPAID_EVENT,d.AdPaused)}function J(){L.emit(e.VPAID_EVENT,d.AdPlaying)}function K(a){L.emit(e.VPAID_EVENT,d.AdLog,a)}var L=this;f.call(this);var M,N,O,P=1,Q=h(),R=h(),S=h(),T=h(),U=g.all([R.promise,S.promise,T.promise]);L.detach=function(){if(N.parentNode)try{N.parentNode.removeChild(N)}catch(a){}},L.getAdLinear=function(){if(M)try{return M.getAdLinear()}catch(a){}},L.getAdWidth=function(){if(M)try{return M.getAdWidth()}catch(a){}},L.getAdHeight=function(){if(M)try{return M.getAdHeight()}catch(a){}},L.getAdExpanded=function(){if(M)try{return M.getAdExpanded()}catch(a){}},L.getAdSkippableState=function(){if(O&&M)try{return M.getAdSkippableState()}catch(a){}},L.getAdRemainingTime=function(){if(M)try{return M.getAdRemainingTime()}catch(a){}},L.getAdDuration=function(){if(M)try{return M.getAdDuration()}catch(a){}},L.getAdVolume=function(){return P},L.setAdVolume=function(a){if(P=a,M)try{M.setAdVolume(a)}catch(a){}},L.getAdCompanions=function(){if(O&&M)try{return M.getAdCompanions()}catch(a){}},L.getAdIcons=function(){if(O&&M)try{return M.getAdIcons()}catch(a){}},L.handshakeVersion=function(a){},L.initAd=function(b,d,e,f,g,h){return c().then(function(c){var e=new i(c.handshakeVersion("2.0"));return 2===e.major&&(O=!0),c.initAd(b,d,"normal",1400,a.adParameters,h),Q.promise})},L.startAd=function(){try{M.setAdVolume(P)}catch(a){}try{M.startAd()}catch(a){R.reject(a)}return U},L.stopAd=function(){if(M)try{M.stopAd()}catch(a){v(a.toString())}},L.pauseAd=function(){if(M)try{M.pauseAd()}catch(a){}},L.resumeAd=function(){if(M)try{M.resumeAd()}catch(a){}},L.skipAd=function(){if(O&&M)try{M.skipAd()}catch(a){}},L.expandAd=function(){if(M)try{M.expandAd()}catch(a){}},L.collapseAd=function(){if(M)try{M.collapseAd()}catch(a){}},L.resizeAd=function(a,b,c){if(M)try{M.resizeAd(a,b,c)}catch(a){}},L.free=function(){k()}};f.recruit(j)},{bluebird:1,"bus/BusEmitter":14,"bus/BusEvents":15,events:3,"model/VPAIDEvent":36,"utils/Semver":43,"utils/promiseDefer":55}],20:[function(a,b,c){"use strict";var d,e=a("bus/BusEvents"),f=a("bus/BusEmitter"),g=a("model/VPAIDEvent"),h=a("bluebird"),i=a("utils/promiseDefer"),j=b.exports=function(a,b){function c(){"number"!=typeof P.duration||isNaN(P.duration)||P.duration==N||(d(g.AdDurationChange),N=P.duration)}function d(a){var b=Array.prototype.slice.call(arguments),a=b[0];1===b.length?M.emit(e.VPAID_EVENT,a):(b.unshift(e.VPAID_EVENT),M.emit.apply(M,b))}function j(a){a.addEventListener("loadstart",l),a.addEventListener("waiting",m),a.addEventListener("canplay",n),a.addEventListener("canplaythrough",o),a.addEventListener("playing",p),a.addEventListener("ended",q),a.addEventListener("seeking",r),a.addEventListener("seeked",s),a.addEventListener("play",t),a.addEventListener("pause",u),a.addEventListener("progress",v),a.addEventListener("durationchange",w),a.addEventListener("fullscreenchange",x),a.addEventListener("error",y),a.addEventListener("suspend",z),a.addEventListener("abort",A),a.addEventListener("emptied",B),a.addEventListener("stalled",C),a.addEventListener("loadedmetadata",D),a.addEventListener("loadeddata",E),a.addEventListener("timeupdate",F),a.addEventListener("ratechange",G),a.addEventListener("volumechange",H),a.addEventListener("texttrackchange",I),a.addEventListener("loadedmetadata",J),a.addEventListener("posterchange",K),a.addEventListener("click",L)}function k(a){a.removeEventListener("loadstart",l),a.removeEventListener("waiting",m),a.removeEventListener("canplay",n),a.removeEventListener("canplaythrough",o),a.removeEventListener("playing",p),a.removeEventListener("ended",q),a.removeEventListener("seeking",r),a.removeEventListener("seeked",s),a.removeEventListener("play",t),a.removeEventListener("pause",u),a.removeEventListener("progress",v),a.removeEventListener("durationchange",w),a.removeEventListener("fullscreenchange",x),a.removeEventListener("error",y),a.removeEventListener("suspend",z),a.removeEventListener("abort",A),a.removeEventListener("emptied",B),a.removeEventListener("stalled",C),a.removeEventListener("loadedmetadata",D),a.removeEventListener("loadeddata",E),a.removeEventListener("timeupdate",F),a.removeEventListener("ratechange",G),a.removeEventListener("volumechange",H),a.removeEventListener("texttrackchange",I),a.removeEventListener("loadedmetadata",J),a.removeEventListener("posterchange",K),a.removeEventListener("click",L)}function l(){}function m(){}function n(){}function o(){}function p(){}function q(){k(P),setTimeout(function(){d(g.AdStopped)},1)}function r(){}function s(){}function t(){U===!0?d(g.AdPlaying):T.resolve(!0)}function u(){S||d(g.AdPaused)}function v(){}function w(){d(g.AdDurationChange),N=P.duration}function x(){}function y(a){k(P),U?d(g.AdError,a.toString()):T.reject(a.error||new Error("Video failed to start"))}function z(){}function A(){}function B(){}function C(){}function D(){c()}function E(){c()}function F(){T.resolve(!0),V=!0;var a=P.currentTime/P.duration;if(a===a)for(;O.length>0&&a>=O[0].time;){var b=O.shift();d(b.event)}0===O.length&&(S=!0)}function G(){}function H(){try{R=P.volume}catch(a){}d(g.AdVolumeChange)}function I(){}function J(){}function K(){}function L(){V&&d(g.AdClickThru,b,"1",!0)}f.call(this);var M=this,N=-2;a=Array.isArray(a)?a:[a];var O=[{time:0,event:"AdVideoStart"},{time:.25,event:"AdVideoFirstQuartile"},{time:.5,event:"AdVideoMidpoint"},{time:.75,event:"AdVideoThirdQuartile"},{time:1,event:"AdVideoComplete"}];b=b||"";var P,Q,R=1,S=!1,T=i(),U=!1,V=!1;M.free=function(){k(P)},M.handshakeVersion=function(a){return"2.0"},M.initAd=function(b,c,d,e,f,g){try{if(P=g.videoSlot,!P)return h.reject(new Error("No videoSlot could be found in environmentVars"));for(var i=[],l=0;l<a.length;l++)""!==P.canPlayType(a[l].type)&&i.push(a[l]);if(0===i.length)return h.reject(new Error("No playable videos were found"));var m=parseInt(e,10);if(m!==m&&(m=720),i.sort(function(a,b){var c=parseInt(a.bitrate,10),d=parseInt(b.bitrate,10);return c!==c&&d!==d?0:c!==c?1:d!==d?-1:Math.abs(c-m)-Math.abs(d-m)}),Q=i[0],Q.uri=Q.uri.replace(/^\s*/,"").replace(/\s*$/," "),P.innerHTML="",P.appendChild){var n=P.ownerDocument||document,o=n.createElement("source");o.src=Q.uri,P.appendChild(o)}return P.src=Q.uri,j(P),h.resolve(!0)}catch(a){return k(P),h.reject(a)}},M.startAd=function(){try{P.play()}catch(a){T.reject(a)}return T.promise.then(function(){U=!0,d(g.AdImpression),d(g.AdStarted),d(g.AdVideoStart)})},M.stopAd=function(){try{k(P),P.stop()}catch(a){d(g.AdStopped)}},M.resizeAd=function(a,b,c){},M.pauseAd=function(){try{P.pause()}catch(a){}},M.resumeAd=function(){try{P.play()}catch(a){}},M.expandAd=function(){},M.collapseAd=function(){},M.skipAd=function(){},M.subscribe=function(a,b){"function"==typeof a&&"string"==typeof b&&eventBus.on(b,a)},M.unsubscribe=function(a,b){"function"==typeof a&&"string"==typeof b&&eventBus.removeListener(b,a)},M.getAdVolume=function(){return R},M.setAdVolume=function(a){R=a,P&&(P.volume=a)},M.getAdExpanded=function(){return!1},M.getAdSkippableState=function(){return!1},M.getAdLinear=function(){return!0},M.getAdWidth=function(){try{return P.videoWidth}catch(a){return 400}},M.getAdHeight=function(){try{return P.videoHeight}catch(a){return 300}},M.getAdRemainingTime=function(){try{return P.duration-P.currentTime}catch(a){return-2}},M.getAdDuration=function(){try{if("number"==typeof P.duration&&!isNaN(P.duration))return N=P.duration,P.duration}catch(a){}return-2},M.getAdCompanions=function(){return""},M.getAdIcons=function(){return!1}};j.canPlayType=function(a){return d||(d=document.createElement("video")),d.canPlayType(a)},f.recruit(j)},{bluebird:1,"bus/BusEmitter":14,"bus/BusEvents":15,"model/VPAIDEvent":36,"utils/promiseDefer":55}],21:[function(a,b,c){"use strict";function d(a,b){return a=parseInt(a,10),b=parseInt(b,10),a!==a||b!==b?0:a<=0||b<=0?0:a<=300||b<=250?1:a<=640||b<=360?2:a<=1024||b<=760?3:4}var e=[],f=a("utils/parseDomain"),g=a("extension/external/moat.js"),h=a("extension/external/__IASVANS_3.2.1.js"),i=1,j=2;b.exports={configure:function(a,b,c,k,l,m){var n=c.extensions.split(/,/),o=a.siteUrl?f(a.siteUrl):"";o||(o="unknown_referrer");for(var p=0,q=0;q<n.length;q++)switch(n[q]){case"moat":!function(){var f=g.initMoatTracking(k,{level1:"planbluejs",level2:""+a.exchangeId,level3:""+d(b.width,b.height),level4:"PO"+c.po+"_"+c.creativeId,slicer1:o,slicer2:o},l(),"planbluejsvideo404822704498");e.push(function(a){var b={type:a[0],adVolume:m()};f.dispatchEvent(b)})}(),p|=i;break;case"ias":!function(){var f=new h;f.initCM({anId:8540,advId:"planbluejs",campId:""+a.exchangeId,pubId:d(b.width,b.height),placementId:"PO"+c.po+"_"+c.creativeId,impId:c.sessionId,partner:"8540",adsafe_url:o,bidUrl:o,extBidUrl:o},k),e.push(function(a){var c=b.width+"x"+b.height,d={ad_duration:l(),ad_dimensions:c,player_dimensions:c,ad_offset_left:0,ad_offset_top:0,volume:m()};f.sendEvent(a[0],d)})}(),p|=j}return p},notifyEvent:function(a){for(var b=0;b<e.length;b++)try{e[b](a)}catch(a){}}}},{"extension/external/__IASVANS_3.2.1.js":22,"extension/external/moat.js":23,"utils/parseDomain":52}],22:[function(a,b,c){"use strict";var d=function(a){var b={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(a){try{this.sendUrlRequest(["//pixel.adsafeprotected.com/mon?anId=10173&campId=",encodeURIComponent(g.getPartnerId()),"&pubId=",encodeURIComponent("vans-js_"+a)].join(""))}catch(a){c.report("smp",a)}},sendUrlRequest:function(a,b){var c,d;if(a){c=this.getWindow();try{d=new c.XMLHttpRequest,b&&(d.onreadystatechange=b),d.open("GET",a),d.send()}catch(a){}}},getWindow:function(){return window},getDocument:function(){return document},generateUID:function(){var a,b="";try{for(a=0;8>a;a++)b=[b,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(a){}return b},noop:function(){}},c=function(){var a={};return{report:function(c,d){if(!a[c])try{a[c]=!0,b.sendUrlRequest(["//fw.adsafeprotected.com/jsdiagnostic?code:vans-js_",encodeURIComponent(g.getPartnerId()),"_",c,"&err:",encodeURIComponent(d.message)].join(""))}catch(a){}}}}(),d=function(){var a,d=!1,e=function(a){return a==g()&&(d=!0,f.flushUnsentEvents()),d?"jv3":null},g=function(){return a||(a=b.generateUID()),a};return{getVideoId:g,setNodeInterface:function(a){var d,f,h=g();try{d="IASid"+h,f="blockAd"+h,a.className+=" integral-vid-"+h,a[f]=b.noop,a[d]=e,a.getVersion=function(){return"3.2.1"}}catch(a){c.report("sni",a)}},isEstablished:function(){return d},resetHandshake:function(){d=!1}}}(),e=function(){var a,e=function(){var a=function(a){return"undefined"!=typeof a},b=function(){var b="u";try{a(window.opera)&&a(window.opera.buildNumber)?b="o":a(window.mozInnerScreenY)?b="g":a(window.chrome)&&a(window.chrome.csi)?b="c":a(window.msWriteProfilerMark)&&a(window.crypto)?b="e":a(window.attachEvent)||a(window.msCrypto)?b="i":a(window.WebKitPoint)&&(b="w")}catch(a){}return b}(),c=function(){var b=function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];""!==d&&"null"!==d&&"undefined"!==d&&null!==d&&a(d)||delete b[c]}return b},c=function b(c){var d,e,b={};for(e in c)c.hasOwnProperty(e)&&(d=c[e],a(b[d])?b[d]+=e:b[d]=e);c={};for(e in b)b.hasOwnProperty(e)&&(d=b[e],c[d]=e);return c};return function(){var d=function b(){var c={g:"",q:""};try{c.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(f){var d,b=f.message,b=b.substring(b.lastIndexOf("<")+1,b.lastIndexOf(">"));if((d=a(b))&&(d=!1,a(window.navigator)&&a(window.navigator.userAgent))){var e=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/);null!==e&&2==e.length&&(e=e[1].split("."),3==parseInt(e[0],10)&&6>=parseInt(e[1],10)&&(3==e.length?13>=parseInt(e[2],10)&&(d=!0):d=!0))}d&&(c.g=b)}return c},e={};try{e.a=encodeURIComponent(top.location.href)}catch(a){}try{e.b=encodeURIComponent(parent.location.href)}catch(a){}if(window!=top){try{e.c=encodeURIComponent(parent.document.referrer)}catch(a){}try{e.e=encodeURIComponent(window.document.referrer)}catch(a){}}try{e.d=encodeURIComponent(window.location.href)}catch(a){}try{var f=d();e.g=encodeURIComponent(f.g),e.q=encodeURIComponent(f.q)}catch(a){}var g,e=b(e),e=c(e),d=[];for(g in e)e.hasOwnProperty(g)&&d.push({key:g,val:e[g]});return d.sort(function(a,b){return a.val.length>b.val.length?1:a.val.length<b.val.length?-1:0}),d}()}();return{br:b,urls:c}},g=function a(b,e,f){var a=["//fw.adsafeprotected.com/db2/video/",e,"/",f,"/skeleton.js?videoId=",d.getVideoId()].join("");e=function(b){a=[a,"&adsafe_url=",b.val,"&adsafe_type=",b.key].join("")};try{b.urls.forEach(e),a=[a,"&adsafe_jsinfo=br:",b.br].join("")}catch(a){c.report("bvu",a)}return a},h=function(){if(4==this.readyState)if(f.sendPerfSample(40),200==this.status)try{a("failed"===JSON.parse(this.responseText).action?"block":"safe")}catch(a){c.report("ba",a)}else c.report("blk_url_req_err",{message:this.status})};return{init:function(c,d,i){var j=e();f.sendPerfSample(30),c=g(j,c,d),a=i,b.sendUrlRequest(c,h)}}}(),f=function(){var a=[],e=function(e){if(d.isEstablished())try{b.getWindow().postMessage(JSON.stringify(e),"*")}catch(a){c.report("dm",a)}else try{a.push(e)}catch(a){c.report("cm",a)}},f=function(a,f){try{e({messageType:a,id:d.getVideoId(),time:b.now(),partner:g.getPartnerId(),eventData:f})}catch(a){c.report("se",a)}};return{sendEvent:f,flushUnsentEvents:function(){try{a.forEach(e)}catch(a){c.report("fue",a)}},sendPerfSample:function(a){f("PerfCheckpoint",{type:"vans",code:a,timestamp:b.now()})}}}(),g=function(){var g,h=function(b,e){var f,g=a||"fw.adsafeprotected.com",h=function(a){var b="";return Object.keys(a).forEach(function(c){"advEntityId"!=c&&"pubEntityId"!=c&&"partner"!=c&&(b+="&"+c+"="+a[c])}),b};try{f=["//",g,b,"?videoId=",d.getVideoId(),h(e)].join("")}catch(a){c.report("bsurl",a)}return f},i=function(a,c){var d,e=b.getDocument();try{if(d=e.createElement("script"),d.src=h(a,c),e.body)e.body.insertBefore(d,e.body.firstChild);else if(e.head)e.head.appendChild(d);else{if(!e.documentElement)throw Error();e.documentElement.appendChild(d)}}catch(a){b.sendMonitoringPixel("inj_err")}};return{initCM:function(a,e){if(!a.partner)throw Error("missing partnerId");f.sendPerfSample(20),g=a.partner;try{if(!a.anId)throw Error("missing anId");b.sendMonitoringPixel("cminit"),d.setNodeInterface(e),i("/jsvid",a)}catch(a){c.report("icm",a)}},initFW:function(a,h,j){var k;if(!a.partner)throw Error("missing partnerId");f.sendPerfSample(20),g=a.partner;try{if(!a.advEntityId||!a.pubEntityId)throw Error("missing client id: advEntityId: "+a.advEntityId+" ,pubEntityId: "+a.pubEntityId);b.sendMonitoringPixel("fwinit"),j&&e.init(a.advEntityId,a.pubEntityId,j),k="/fwjsvid/st/"+a.advEntityId+"/"+a.pubEntityId+"/skeleton.js",d.setNodeInterface(h),i(k,a)}catch(a){c.report("ifw",a)}},getPartnerId:function(){return g}}}();return f.sendPerfSample(10),{initFW:g.initFW,initCM:g.initCM,sendEvent:f.sendEvent}};b.exports=d},{}],23:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=document.createElement("script"),g=[];b={adData:{ids:b,duration:c,url:e},dispatchEvent:function(a){this.sendEvent?(g&&(g.push(a),a=g,g=!1),this.sendEvent(a)):g.push(a)}},c="_moatApi"+Math.floor(1e8*Math.random());var h,i;try{h=a.ownerDocument,i=h.defaultView||h.parentWindow}catch(a){h=document,i=window}return i[c]=b,f.type="text/javascript",a&&a.insertBefore(f,a.childNodes[0]||null),f.src="https://z.moatads.com/"+d+"/moatvideo.js#"+c,b}b.exports={initMoatTracking:d
}},{}],24:[function(a,b,c){"use strict";b.exports={},b.exports.EVENT_forensics_config=31355,b.exports.EVENT_forensics_stop=22164,b.exports.EVENT_vpaid_adstarted=1917,b.exports.EVENT_vpaid_adimpression=31112,b.exports.EVENT_vpaid_advideofirstquartile=31395,b.exports.EVENT_vpaid_advideomidpoint=40726,b.exports.EVENT_vpaid_advideothirdquartile=52887,b.exports.EVENT_vpaid_advideocomplete=42333,b.exports.DOM_cefsharp_CreatePromise=1702193913,b.exports.DOM_title=183222373,b.exports.DOM_incomingSource=1768731966,b.exports.DOM_Video_element=1952814165,b.exports.DOM_playerInstance=2018832255,b.exports.DOM_video_elem=1703766154,b.exports.DOM_clickplayer=108911480,b.exports.DOM_tech=2087956799,b.exports.DOM_currentSource_=379959630,b.exports.DOM___MethBrowser=1265746141,b.exports.DOM_flashvars=262075363,b.exports.DOM_file=2087597251,b.exports.DOM_usc=193422432,b.exports.DOM_FakeVideoUrl=259297974,b.exports.DOM_OctoPage=1276044225,b.exports.DOM_directEventListener=467958842,b.exports.DOM_sf21=2088331059,b.exports.DOM_CustomObject=675566563,b.exports.DOM_on=5861220,b.exports.DOM_CustomPlayer=167066533,b.exports.DOM_p=177621,b.exports.DOM_source=22509752,b.exports.DOM_src=193432839,b.exports.EVENT_rivet_foundunit=2646},{}],25:[function(a,b,c){"use strict";var d=a("bus/Bus"),e=a("bus/BusEvents"),f=a("bluebird"),g=(a("utils/promiseDefer"),a("forensics/GhostProtocol"));b.exports=function(a,b,c){function h(a,b,c){return new f(function(f,g){return j?void f(j):(j=document.createElement("iframe"),j.style="display: none",j.src=a+"ff.html",j.onload=function(a){f(j)},j.onerror=function(a){g(new Error(a.toString()))},document.body.appendChild(j),d.on(e.AD_PLAYED,function(a){j.contentWindow.postMessage({creative:a.creativeId,userAgent:b,ipAddress:c,method:"mark"},"*")}),j)})}function i(a,b,c,d,e,h){return new f(function(b,c){function f(a){a.data&&"undefined"!=typeof a.data.res&&(window.removeEventListener("message",f),a.data.res===!0?b(!0):c(new g.RejectionError("Frequency said '"+a.data.res+"'",g.REJECT_REASON_FREQUENCY_CAP)))}window.addEventListener("message",f),a.contentWindow.postMessage({creative:d,userAgent:e,ipAddress:h,method:"check"},"*")})}var j,k=this;k.promiseOutcome=function(d,e){if(d.f){var g=d.f.split(","),j=g[0],k=g[1];return h(a,b,c).then(function(a){return i(a,j,k,e.creativeId,b,c)})}return f.resolve(!0)}}},{bluebird:1,"bus/Bus":13,"bus/BusEvents":15,"forensics/GhostProtocol":27,"utils/promiseDefer":55}],26:[function(a,b,c){"use strict";var d=a("utils/buildQueryLike"),e=a("utils/pse1"),f=a("utils/extend"),g=a("forensics/GhostProtocol"),h=a("utils/promiseGet");b.exports=function(a,b,c,i){var j=this;j.promiseOutcome=function(){var b=d(f({},i),"__","_",e.encode),j=[a(),"/geo/",b,"/pse1/blank.gif?referrer=",e.encode(c)].join("");return h(j).spread(function(a,b){if(a.statusCode>=200&&a.statusCode<400)return!0;throw new g.RejectionError("Bad geo ("+a.statusCode+")",g.REJECT_REASON_GEO)}).catch(function(a){throw new g.RejectionError("Bad geo ("+a.message+")",g.REJECT_REASON_GEO)})}}},{"forensics/GhostProtocol":27,"utils/buildQueryLike":44,"utils/extend":45,"utils/promiseGet":56,"utils/pse1":57}],27:[function(a,b,c){"use strict";function d(b,c){var d=this,g=a("forensics/Size"),h=a("forensics/Frequency"),i=a("forensics/Viewability"),j=[new g(c.videoSlot,c.slot),new h(b.baseDomain,window.navigator.userAgent,b.ipAddress),new i(c.videoSlot,c.slot)];d.promiseFlags=function(a,b){var c=a.ghostFlags?a.ghostFlags.split(":").reduce(function(a,b){return a[b.substr(0,1)]=1===b.length||b.substr(1),a},{}):{};return f.all(j.map(function(d){return d.promiseOutcome(c,a,b).reflect()})).then(function(a){for(var b=0,d=0;d<a.length;d++){var f=a[d];if(f.isRejected()){var g=f.reason();if(!(g instanceof e))throw g;b|=g.ghostCode}}if(b>0)throw new e("Ad creative rejected ("+c+")",b)})}}function e(a,b,c){Error.call(this),this.name="RejectionError",this.message=a,this.cause=a,this.isGhostRejection=!0,this.ghostCode=b,this.data=c,a instanceof Error?(this.message=a.message,this.stack=a.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var f=a("bluebird"),g=a("util").inherits;g(e,Error),d.RejectionError=e,d.REJECT_REASON_VISIBILITY=1,d.REJECT_REASON_AUDIBILITY=2,d.REJECT_REASON_MEXP=4,d.REJECT_REASON_SIZE=8,d.REJECT_REASON_BADGEO=16,d.REJECT_REASON_ABORTED=32,d.REJECT_REASON_VAST_TAG_PARSE_FAILURE=64,d.REJECT_REASON_VAST_TAG_LOAD_FAIL=128,d.REJECT_REASON_EMPTY_VAST_TAG=256,d.REJECT_REASON_FREQUENCY_CAP=512,d.REJECT_REASON_DOM_TOXIC=1024,d.REJECT_REASON_GEO=2048,d.REJECT_REASON_IP_TOXIC=4096,b.exports=d},{bluebird:1,"forensics/Frequency":25,"forensics/Size":28,"forensics/Viewability":30,util:9}],28:[function(a,b,c){"use strict";var d=a("bluebird"),e=(a("utils/promiseDefer"),a("forensics/GhostProtocol")),f=a("utils/getActualDimensions");b.exports=function(a,b){var c,g=this;g.promiseOutcome=function(g,h,i){return new d(function(d,h){void 0===c&&(c=f(a,b)),i.sendRealSoon({TAFRAMEW:c.width,TAFRAMEH:c.height});var j=parseInt(g.w,10),k=parseInt(g.h,10);if(j===j||k===k){null===c&&h(new e.RejectionError("No good element for size checks",e.REJECT_REASON_SIZE));var l=c.width,m=c.height;(l<j||m<k)&&h(new e.RejectionError("Size rejected",e.REJECT_REASON_SIZE))}d(!0)})}}},{bluebird:1,"forensics/GhostProtocol":27,"utils/getActualDimensions":47,"utils/promiseDefer":55}],29:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=(a("utils/promiseDefer"),a("utils/extend")),f=a("forensics/GhostProtocol"),g=a("bluebird");b.exports=function a(){function b(){function a(a){for(var b=5381,c=a.length,d=0;d<c;d++)b=2147483647&(33*b^a.charCodeAt(d));return b}function b(b){return y[b]?y[b]:y[b]=a(b)}function c(a){return a.match(/[\w-]*/g)}function e(a,c){for(var d in a)if(b(d)===c)return c;return!1}function f(a,c){return!(!a.jwplayer||!a.jwplayer.key||b(a.jwplayer.key)!==c)&&c}function g(a,d){for(var e,f,g=a.document.scripts,h=0;h<g.length;h++){var i=[d];i.unshift(1199969007);for(var j=c(g[h].innerText),k=0;k<j.length;k++)(e=i.indexOf(b(j[k])))>-1&&(f=i.splice(e,1)[0]);if(0===i.length)return f}return!1}function k(b){return r!==a(Function.prototype.toString.call(b.document.hasFocus).replace(/.*{(.*)/,"{$1"))&&439393586}function l(a){for(var d,e,f=a.document.scripts,g=0;g<f.length;g++){for(var h=[2020915503,753705388,193452190],i=c(f[g].innerText),j=0;j<i.length;j++)(d=h.indexOf(b(i[j])))>-1&&(e=h.splice(d,1)[0]);if(0===h.length){for(var k=0;k<i.length;k++)if(178638746==b(i[k]))return!1;return 193452190}}return!1}function m(a){var c=[1616309626];if(a.mixpanel&&a.mixpanel&&a.mixpanel.config&&a.mixpanel.config.token){var d=b(a.mixpanel.config.token);if(c.indexOf(d)>-1){if(a.mixpanel.cookie&&a.mixpanel.cookie.props){var e=a.mixpanel.cookie.props;for(var f in e)if(193452190===b(f)&&178638746===b(e[f]))return!1}return 193452190}}return!1}function n(){var a=[],c=document.createElement("iframe");c.style.visibility="hidden",c.style.position="absolute",c.style.left=0,c.style.top=0,c.style.height=0,c.style.width=0,c.style.border="none",document.body.appendChild(c);var e=c.contentWindow;if(e){for(var f in e)if(0!==f.indexOf("webkit")){var g=e[f];if(g&&"object"===("undefined"==typeof g?"undefined":d(g))){var h=b(f);if(1898500505!==h&&193422126!==h&&1357306123!==h&&2088335225!==h&&2016265097!==h&&257747018!==h&&1569446316!==h&&1280907569!==h&&1142011746!==h&&"o"in g&&null===g.o){var i=0;for(var j in g)i++;1==i&&a.push(""+f)}}}return document.body.removeChild(c),a.length>1&&1128896970}}function o(b,c){for(var d=b.document.scripts,e=b.document.createElement("a"),f=0;f<d.length;f++){e.href=d[f].src;var g=e.pathname.replace(/^\/?/,"/");if(a(g)===c)return c}return!1}function p(b,c){var d,e,f,g,h,i,c=c.slice();if(d=c.shift(),c.length<1)return!1;i=b;a:for(h=0;h<d.length;h++){f=d[h];for(var j in i)if(a(j)===f){i=i[j];continue a}return!1}if(e=c.shift(),e.length<1)return d.join(".");for(g=a(i+""),h=0;h<e.length;h++)if(g===e[h])return g;return!1}function q(a,b,c,d,h){for(var i,j=window,q=0;j;){var r;try{for(r=0;r<a.length;r++)if((i=e(j,a[r]))!==!1)return i;for(r=0;r<b.length;r++)if((i=f(j,b[r]))!==!1)return i;for(r=0;r<c.length;r++)if((i=g(j,c[r]))!==!1)return i;for(r=0;r<d.length;r++)if((i=o(j,d[r]))!==!1)return i;for(r=0;r<h.length;r++)if((i=p(j,h[r]))!==!1)return i;if((i=l(j))!==!1)return i;if((i=m(j))!==!1)return i;if((i=k(j))!==!1)return i;j=j===j.parent||q>20?null:j.parent,q++}catch(a){return!1}}try{if((i=n())!==!1)return i}catch(a){return!1}return!1}var r,s=[1265746141,1276044225,467958842],t=[1559854498,711978014,1542628612,1265160611,408508857],u=[138877925,288004115],v=[[[108911480,2087956799,379959630,193432839],[1478948472,1559738828]],[[262075363,2087597251],[157252188]],[[193422432,259297974],[]],[[1401425994,1765984320],[1789113538]]],w=[1370718655,1430910201],x={1265746141:["window.1265746141",null,i],1276044225:["window.1276044225,window.467958842",null,i],467958842:["window.1276044225,window.467958842",null,i],1789113538:["window.1401425994.1765984320,text.1789113538",null,i],1265160611:["div.1952814165,window.2018832255,jwp.2109884303",null,i],1559854498:["text.1340200044,jwp.1051856270",null,i],711978014:["text.1340200044,jwp.1051856270",null,i],1370718655:["text.1340200044,url.1967267444",null,i],1430910201:["text.1340200044,url.1957292722",null,i],1128896970:["window.1128896970",{DBGTP:"DFMARK",DBGVAL:6},i],138877925:["div.1703766154,window.108911480,plr.1559738828",null,i],288004115:["div.1703766154,window.108911480,plr.1559738828",null,i],1478948472:["div.1703766154,window.108911480,plr.1478948472",null,i],1559738828:["div.1703766154,window.108911480,plr.1559738828",null,i],157252188:["window.262075363.2087597251,text.157252188",null,i],"193422432.259297974":["window.193422432.259297974",null,i],408508857:["div.930539569",null,h],666205209:["div.666205209",{KMMS:225},h],193452190:["script.193452190",{EHIAS:"non-human"},i],439393586:["document.439393586",null,j]},y={};try{r=a(Object.prototype.constructor.toString().replace(/.*{(.*)/,"{$1"))}catch(a){}var z=q(s,t,u,w,v);return!!(z&&z in x)&&x[z]}var c,h=(a.TOXIC_NONE=0,a.TOXIC_DOMAIN=1),i=a.TOXIC_IP=2,j=a.TOXIC_NO_VIS=4,k=this;k.promiseOutcome=function(){return new g(function(a,d){void 0===c&&(c=b());var g=0,k={};if(c.length>0){var l=c[0],m=c[1],n=c[2];n&h&&(g|=f.REJECT_REASON_DOM_TOXIC),n&i&&(g|=f.REJECT_REASON_IP_TOXIC),n&j&&(g|=f.REJECT_REASON_VISIBILITY),k.DOMFOUND=l,e(k,m),d(new f.RejectionError("Toxic environment",g,k))}else a(!0)})}}},{bluebird:1,"forensics/GhostProtocol":27,"utils/extend":45,"utils/promiseDefer":55}],30:[function(a,b,c){"use strict";var d=a("bluebird"),e=a("forensics/GhostProtocol"),f=a("utils/getActualDimensions"),g=a("utils/viewportDimensions");b.exports=function(a,b){function c(){var c=f(a,b),d=g(c.owner.ownerDocument);return h(c,d.width,d.height)}function h(a,b,c){var d=Math.max(0,Math.min(a.right,b)-Math.max(a.left,0)),e=Math.max(0,Math.min(a.bottom,c)-Math.max(a.top,0)),f=a.right-a.left,g=a.bottom-a.top,h=f*g,i=d*e;return i/h<.5}var i,j=this;j.promiseOutcome=function(a,b){return new d(function(b,d){void 0===i&&(i=c()),a.V&&i?d(new e.RejectionError("Viewability rejected",e.REJECT_REASON_VISIBILITY)):b(!0)})}}},{bluebird:1,"forensics/GhostProtocol":27,"utils/getActualDimensions":47,"utils/viewportDimensions":60}],31:[function(a,b,c){"use strict";var d=a("utils/extend"),e=a("utils/buildQueryLike"),f=a("utils/pse1");b.exports=function(a,b){function c(a){g(),l=setTimeout(n.send,a)}function g(){l&&(clearTimeout(l),l=null)}function h(a,b){if(b&&"string"==typeof a){var c={};return c[a]=b,c}return a?a:{}}function i(a){return d(a,{ITM:b}),a=k(a),[o,"/ps3/",e(a,"__","_",f.encode),"/pse1/blank.gif?",m].join("")}function j(a){(new Image).src=a}function k(a){var b={};for(var c in a)void 0!==a[c]&&null!==a[c]&&""!==a[c]&&(b[c]=a[c]);return b}var l,m,n=this,o=a.replace(/^\/?/,""),p={},q={},r=!0,s=!1,t=[];Object.defineProperty(n,"sessionId",{get:function(){return p.SID?p.SID:""}}),n.always=function(a){d(p,a)},n.setSpikeDomain=function(a){o=a.replace(/^\/?/,"")},n.getSpikeDomain=function(){return o},n.setQuery=function(a){m="&"+e(a,"&","=",encodeURIComponent)},n.reserveItem=function(){var a=b;return b++,a},n.send=function(a,c){if(r){if(s===!0)return void t.push([a,c]);var e=h(a,c);j(i(d({},p,q,e))),g(),q={},b++}},n.startQueue=function(){s=!0},n.flushQueue=function(){s=!1;for(var a=0;a<t.length;a++)n.send.apply(n,t[a]);t=[]},n.sendRealSoon=function(a,b){d(q,h(a,b)),c(100)},n.shutdown=function(){g(),n.send(),r=!1}}},{"utils/buildQueryLike":44,"utils/extend":45,"utils/pse1":57}],32:[function(a,b,c){"use strict";function d(){var a={};for(var b in this)a[this[b]]=!0;Object.defineProperty(this,"isVASTEvent",{enumerable:!1,value:function(b){return b in a}})}d.prototype.START="start",d.prototype.CREATIVE_VIEW="creativeView",d.prototype.FIRST_QUARTILE="firstQuartile",d.prototype.MIDPOINT="midpoint",d.prototype.THIRD_QUARTILE="thirdQuartile",d.prototype.COMPLETE="complete",d.prototype.MUTE="mute",d.prototype.UNMUTE="unmute",d.prototype.PAUSE="pause",d.prototype.REWIND="rewind",d.prototype.RESUME="resume",d.prototype.FULL_SCREEN="fullscreen",d.prototype.EXIT_FULL_SCREEN="exitFullscreen",d.prototype.EXPAND="expand",d.prototype.COLLAPSE="collapse",d.prototype.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",d.prototype.CLOSE_LINEAR="closeLinear",d.prototype.SKIP="skip",d.prototype.PROGRESS="progress",d.prototype.CLICKTRACK="clickTrack",d.prototype.IMPRESSION="impression",d.prototype.ERROR="error",b.exports=new d},{}],33:[function(a,b,c){"use strict";function d(){function a(a){var b=e("Impression",a);c(i(b),h.IMPRESSION);var g=e("Error",a);c(i(g),h.ERROR);for(var j=e("Creatives > Creative > Linear",a),k=0;k<j.length;k++){for(var l=j[k],m=e("Tracking",l),n=0;n<m.length;n++){var o=m[n],p=o.getAttribute("event");p&&c([f(o.textContent)],f(p))}var q=e("VideoClicks > ClickTracking",l);c(i(q),h.CLICKTRACK);var r=e("VideoClicks > ClickThrough",l);d(i(r))}}function b(a){function b(a,b,c){b.hasAttribute(a)&&(c[a]=b.getAttribute(a)||"")}for(var c=e("Creatives > Creative > Linear",a),d=0;d<c.length;d++){var g,h=c[d],i=e("AdParameters",h);i.length>0&&(g=f(i[0].textContent));for(var k=e("MediaFile",h),m=0;m<k.length;m++){var n=k[m],o={uri:f(n.textContent)};b("id",n,o),b("width",n,o),b("height",n,o),b("type",n,o),b("delivery",n,o),b("apiFramework",n,o),b("bitrate",n,o),g&&o.apiFramework&&(o.adParameters=g),l&&(o.price=l),j&&(o.adTitle=j),p.push(o)}}}function c(a,b){if(h.isVASTEvent(b))for(var c=n[b]||(n[b]=[]),d=0;d<a.length;d++)c.push(a[d])}function d(a){o=o.concat(a)}function i(a){for(var b=[],c=0;c<a.length;c++)b.push(f(a[c].textContent));return b}var j,k,l,m=this,n={},o=[],p=[];this.parse=function(c){if("function"!=typeof c.getElementsByTagName)throw new Error("Invalid XML Document object ("+Object.prototype.toString.call(c)+")");var d,h=e("VAST > Ad > InLine",c);if(h.length>0)d=h[0];else{var i=e("VAST > Ad > Wrapper",c);if(i.length>0){d=i[0];var n=e("VASTAdTagURI",d);n.length>0&&(k=f(n[0].textContent))}}if(!d)throw new g.RejectionError("Empty vast tag",g.REJECT_REASON_EMPTY_VAST_TAG);for(var o=e("Extensions > Extension",d),p=0;p<o.length;p++){var q=o[p],r=q.getAttribute("type");if(r&&"lr-pricing"===r.toLowerCase()){var s=e("Price",q);s.length>0&&(l=s[0].textContent)}}var t=e("AdTitle",d);return t.length>0&&(j=t[0].textContent),a(d),b(d),m},this.getTrackingPixels=function(a){return n[a]?n[a].slice():[]},this.getClickThroughs=function(){return o.slice()},this.getMediaFiles=function(){return p.slice()},this.getVastAdTagUri=function(){return k}}var e=a("sizzle"),f=a("utils/trim"),g=a("forensics/GhostProtocol"),h=a("model/VASTEvent");b.exports=d},{"forensics/GhostProtocol":27,"model/VASTEvent":32,sizzle:6,"utils/trim":59}],34:[function(a,b,c){"use strict";var d=(a("model/VASTEvent"),a("bus/BusEmitter")),e=a("bus/BusEvents"),f=(a("utils/rand63"),a("utils/forceProtocol"),a("utils/parseQueryLike"),a("utils/promiseDefer"),a("bluebird")),g=b.exports=function(a,b){function c(a){if(a in j){for(var b=j[a],c=0;c<b.length;c++)h(b[c]).then(function(a){(new Image).src=a});delete j[a]}}function g(a){var b=1;do 1&a&&c("G"+b),b<<=1;while(a>>=1)}function h(c){return"string"!=typeof c?f.reject(new Error("not a string: "+String(c))):(b&&(c=b.expand(c)),a&&(c=a.format(c,!0)),f.resolve(c))}d.call(this);var i=this,j={};i.getPixels=function(a){return j[a]?j[a].slice():[]},i.addPixel=function(a,b){var c=j[a]||(j[a]=[]);c.push(b)},i.on(e.VAST_EVENT,c),i.on(e.GHOST_CODE,g)};d.recruit(g)},{bluebird:1,"bus/BusEmitter":14,"bus/BusEvents":15,"model/VASTEvent":32,"utils/forceProtocol":46,"utils/parseQueryLike":53,"utils/promiseDefer":55,"utils/rand63":58}],35:[function(a,b,c){"use strict";var d=a("config/AdConfig"),e=a("config/forensicsApi"),f=a("model/VPAIDEvent"),g=a("ad/AdPlayer"),h=a("bus/BusEvents"),i=a("bus/BusEmitter"),j=a("model/Tracking"),k=a("config/DmcConfig"),l=a("utils/rand63"),m="2.0",n=(a("utils/pick"),null);b.exports=function(){function a(a,b,c){return L.push({type:a,oldFn:b}),function(){return b.apply(c,arguments)}}function b(b,c,d){M.once(b,a(b,c,d))}function c(b,c,d){M.on(b,a(b,c,d))}function o(a,b){for(var c=L.length-1;c>=0;c--){var d=L[c];d.type===a&&d.oldFn===b&&(M.removeListener(a,b),L.splice(c,1))}}function p(a){return"vpaid."+a}function q(){C.emitVPAIDEvent(f.AdLoaded)}function r(){C.emitVPAIDEvent(f.AdImpression),C.emitVPAIDEvent(f.AdStarted),C.emitVPAIDEvent(f.AdVideoStart)}function s(){setTimeout(function(){C.emitVPAIDEvent(f.AdStopped)},500)}function t(){C.emitVPAIDEvent(f.AdPaused)}function u(){C.emitVPAIDEvent(f.AdPlaying)}function v(){C.emitVPAIDEvent(f.AdSizeChange)}function w(a,b,c){C.emitVPAIDEvent(f.AdClickThru,a,b,c)}function x(a){D=a,C.emitVPAIDEvent(f.AdVolumeChange)}function y(){C.emitVPAIDEvent(f.AdDurationChange)}function z(a){var b=a?a.message||a.toString():" unknown error";I.send("DEBUGMSG","cleanupAndShutdown: "+b),n=null,K.free(),C.emitVPAIDEvent(f.AdError,b)}function A(a){switch(a){case"firstQuartile":C.emitVPAIDEvent(f.AdVideoFirstQuartile);break;case"midpoint":C.emitVPAIDEvent(f.AdVideoMidpoint);break;case"thirdQuartile":C.emitVPAIDEvent(f.AdVideoThirdQuartile);break;case"complete":C.emitVPAIDEvent(f.AdVideoComplete)}}var B,C=this,D=1,E=k(),F=l(),G=(new Date).valueOf(),H=E.dmc?"https://"+E.dmc+"--dmc.tekblue.net":"https://bt--"+F+".tekblue.net",I=new j(H,1),J={SOURCEID:"119",SID:F,SIDTIM:G,PVER:"html5/master/27adec9",TV2NSPID:"BNQiMpjaBOpM",ADCGUID:"Blx9fZQVjj)U"};I.always(J),I.send("TV2NBTST","BOOT");var K=new g(I);K.volume=D;var L=[],M=new i;C.handshakeVersion=function(a){return m},C.initAd=function(a,b,c,f,g,i){try{I.send("TV2NBTST","INITAD"),"string"==typeof g?B=d.fromString(g):g instanceof d?B=g:g.AdParameters&&"string"==typeof g.AdParameters?B=d.fromString(g.AdParameters):z("Invalid creativeData");var j=k(g.sessionId);j.dmc&&(H="https://"+j.dmc+"--dmc.tekblue.net",I.setSpikeDomain(H)),K.on("stopped",s),K.on("paused",t),K.on("resumed",u),K.on("resized",v),K.on("clicked",w),K.on("volumeChanged",x),K.on("durationChanged",y),K.on("error",z),K.on(h.VAST_EVENT,A),j.js&&(n=new e(B,F,I,i.videoSlot,j)),i.bootmode=i.bootmode||"VPAID";K.configure(B,{width:a,height:b,slot:i.slot,videoSlot:i.videoSlot,bootmode:i.bootmode}).then(function(){return q(),I.send("TV2NBTST","ADLOADED"),!0}).catch(function(a){z("Failed to initialise")})}catch(a){z(a)}},C.resizeAd=function(a,b,c){try{K.resize(a,b)}catch(a){I.send("DEBUGMSG","resizeAd failed "+a.message)}},C.startAd=function(){try{I.send("TV2NBTST","STARTAD"),K.start().then(r).catch(z)}catch(a){z(a)}},C.stopAd=function(){try{K.stop()}catch(a){z(a)}},C.pauseAd=function(){try{K.pause()}catch(a){}},C.resumeAd=function(){try{K.resume()}catch(a){}},C.skipAd=function(){},C.expandAd=function(){},C.collapseAd=function(){},C.getAdVolume=function(){return D},C.setAdVolume=function(a){D=Math.min(1,Math.max(0,a)),K&&(K.volume=D)},C.getAdExpanded=function(){return!1},C.getAdSkippableState=function(){return!1},C.getAdLinear=function(){return!0},C.getAdWidth=function(){try{return K.width}catch(a){}},C.getAdHeight=function(){try{return K.height}catch(a){}},C.getAdRemainingTime=function(){try{var a=K.duration,b=K.playPosition;if(a===a&&b===b&&a>0&&b>=0)return a-b}catch(a){}return-2},C.getAdDuration=function(){try{return K.duration}catch(a){}return-2},C.getAdCompanions=function(){try{return K.companions}catch(a){}return""},C.getAdIcons=function(){return!1},C.subscribe=function(a,d,e){switch(d){case f.AdStarted:case f.AdStopped:case f.AdSkipped:case f.AdLoaded:case f.AdImpression:case f.AdVideoStart:case f.AdVideoFirstQuartile:case f.AdVideoMidpoint:case f.AdVideoThirdQuartile:case f.AdVideoComplete:case f.AdError:b(p(d),a,e);break;default:c(p(d),a,e)}},C.unsubscribe=function(a,b){o(p(b),a)},C.emitVPAIDEvent=function(){var a,b=Array.prototype.slice.call(arguments);b.length&&(a=b[0]=p(b[0]),M.emitNextTick.apply(M,b),n&&n.events[arguments[0]]&&n.EVENTDISPATCH(n.events[arguments[0]]))}}},{"ad/AdPlayer":11,"bus/BusEmitter":14,"bus/BusEvents":15,"config/AdConfig":16,"config/DmcConfig":17,"config/forensicsApi":18,"model/Tracking":31,"model/VPAIDEvent":36,"utils/pick":54,"utils/rand63":58}],36:[function(a,b,c){"use strict";var d=b.exports=function(){};d.AdStarted="AdStarted",d.AdStopped="AdStopped",d.AdSkipped="AdSkipped",d.AdLoaded="AdLoaded",d.AdImpression="AdImpression",d.AdVideoStart="AdVideoStart",d.AdVideoFirstQuartile="AdVideoFirstQuartile",d.AdVideoMidpoint="AdVideoMidpoint",d.AdVideoThirdQuartile="AdVideoThirdQuartile",d.AdVideoComplete="AdVideoComplete",d.AdError="AdError",d.AdLinearChange="AdLinearChange",d.AdSizeChange="AdSizeChange",d.AdExpandedChange="AdExpandedChange",d.AdSkippableStateChange="AdSkippableStateChange",d.AdDurationChange="AdDurationChange",d.AdRemainingTimeChange="AdRemainingTimeChange",d.AdVolumeChange="AdVolumeChange",d.AdClickThru="AdClickThru",d.AdInteraction="AdInteraction",d.AdUserAcceptInvitation="AdUserAcceptInvitation",d.AdUserMinimize="AdUserMinimize",d.AdUserClose="AdUserClose",d.AdPaused="AdPaused",d.AdPlaying="AdPlaying",d.AdLog="AdLog"},{}],37:[function(a,b,c){"use strict";function d(a,b){function c(a){return h(a).spread(i)}function i(d,f){function h(a){var b=(new DOMParser).parseFromString(a,"application/xml"),c=new e;return c.parse(b),j(c)}if(d.statusCode<200||d.statusCode>=400||""===f){if(!b)throw new g.RejectionError("Vast call returned status "+d.statusCode,g.REJECT_REASON_VAST_TAG_LOAD_FAIL);f=b}var i;try{return h(f)}catch(a){i=a}if(b)try{return h(b)}catch(a){}if(i instanceof g.RejectionError){if(i.ghostCode===g.REJECT_REASON_EMPTY_VAST_TAG&&++o<=5)return c(a);throw i}throw new g.RejectionError("XML parser failed: "+i.message,g.REJECT_REASON_VAST_TAG_PARSE_FAILURE)}function j(a){m.push.apply(m,a.getClickThroughs());for(var b in f){var d=f[b],e=l[d]||(l[d]=[]);e.push.apply(e,a.getTrackingPixels(d))}var g=a.getVastAdTagUri();return g?c(g):(n.push.apply(n,a.getMediaFiles()),k)}var k=this,l={},m=[],n=[],o=0;k.getAllTrackingPixels=function(){return l},k.getTrackingPixels=function(a){return l[a]?l[a].slice():[]},k.getClickThroughs=function(){return m.slice()},k.getMediaFiles=function(){return n.slice()},k.resolve=function(){return c(a)},k.selectMediaFile=function(a){for(var b=[],c=[],e=0;e<n.length;e++){var f=n[e];d.VPAID_MIMETYPE.test(f.type)?b.push(f):d.VIDEO_MIMETYPE.test(f.type)&&c.push(f)}var g=b.length,h=c.length;if(1===g)return b[0];if(0===g&&1===h)return c[0];if(0===g&&0===h)return null;var i;return g>0?i=b:h>0&&(i=c),void 0===i?null:(a=parseInt(a,10),i.sort(function(b,c){var d=parseInt(b.bitrate,10),e=parseInt(c.bitrate,10),f=Math.abs(d-a),g=Math.abs(e-a);return f!==f&&g!==g?0:g!==g?-1:f!==f?1:f-g}),i[0])}}var e=(a("sizzle"),a("model/VASTParser")),f=a("model/VASTEvent"),g=a("forensics/GhostProtocol"),h=a("utils/promiseGet");a("utils/extend");d.VPAID_MIMETYPE=/^(text|application)\/(x-)?(ecma|java)script$/i,d.VIDEO_MIMETYPE=/^video\/(mp4|webm)$/i,b.exports=d},{"forensics/GhostProtocol":27,"model/VASTEvent":32,"model/VASTParser":33,sizzle:6,"utils/extend":45,"utils/promiseGet":56}],38:[function(a,b,c){"use strict";var d=a("utils/parseQueryLike"),e=b.exports=function(a,b,c,d,e){this.protocol=a,this.creativeId=b,this.po=c,this.width=d,this.height=e};e.prototype.expand=function(a){var b=/([a-z]+):\/\/([^?#\/]+)\?(.*)/,c=a.match(b);if(c&&"f"===c[1]){var e=c[2];if("comscore"===e){var f=d(c[3]);return[this.protocol,"https:"===this.protocol?"//s":"//","b.scorecardresearch.com/p?c1=3&c2=19015738&c3=",f.k,"&c4=",this.creativeId,"&c5=",this.po,"&c6=&c10=1&c11=1&c13=",this.width,"x",this.height,"&c16=dcm&cj=1&ax_fwd=1&rn=%n"].join("")}}return a}},{"utils/parseQueryLike":53}],39:[function(a,b,c){"use strict";var d=a("bluebird"),e=b.exports=function(){this.substitutions=[],this.promises=[],this.custom=[]};e.prototype.addSubstitution=function(a,b){return null!==b&&void 0!==b&&(b.then?this.addAsyncStep(a,b):this.addStep(a,b)),this},e.prototype.addStep=function(a,b){return"string"==typeof a&&(a=new RegExp(a,"g")),this.substitutions.push({find:a,value:b}),this},e.prototype.addAsyncStep=function(a,b){return this.promises.push(b.reflect().then(function(b){return b.isFulfilled()?{find:a,value:b.value()}:null})),this},e.prototype.addCustomStep=function(a){this.custom.push(a)},e.prototype.format=function(a,b){return a=this.substitutions.reduce(function(a,b){return a.replace(b.find,b.value)},a),a=this.custom.reduce(function(a,b){if("function"==typeof b)try{a=b(a)}catch(a){}return a},a),b?d.all(this.promises).then(function(b){for(var c=0;c<b.length;c++){var d=b[c];d&&(a=a.replace(d.find,d.value))}return a}):d.resolve(a)}},{bluebird:1}],40:[function(a,b,c){"use strict";function d(a){a=a||window;var b=1,c=2,d=3,e={target:a,windows:[a],depth:1};if(a.self===a.top)e.status=b;else{e.status=c;try{for(var f=a;f!==f.parent;){e.depth++;try{f.frameElement&&e.windows.push(f.parent)||(e.status=d)}catch(a){e.status=d}if(e.depth>20){e.aborted=!0;break}if(!f.parent){e.no_parent=!0;break}f=f.parent}}catch(a){e.depth=-1}}return e.windows.reverse(),e.parent_windows=e.windows.slice(0,-1),e.top_accessible_window=e.windows[0],e}b.exports=function(a){if(!a.tracking)throw new Error("[Sensor IFrame] Missing required argument `tracking`.");var b=d(window);a.tracking.send({WINDEPTH:b.depth,FRMSTAT:b.status})}},{}],41:[function(a,b,c){"use strict";function d(){this.getViewabilityState=function(d,e){var f,g=a();if(g.area==1/0)return{error:"Failed to determine viewport"};var h=d.getBoundingClientRect(),i=h.width*h.height,j=b(window.top);if(g.area/i<.5)f=Math.floor(100*g.area/i);else{var k=c(d,e);k.bottom>j.height&&(k.height-=k.bottom-j.height),k.top<0&&(k.height+=k.top),k.left<0&&(k.width+=k.left),k.right>j.width&&(k.width-=k.right-j.width),f=Math.floor(100*(k.width*k.height)/i)}return{clientWidth:j.width,clientHeight:j.height,objTop:h.top,objBottom:h.bottom,objLeft:h.left,objRight:h.right,percentViewable:f}};var a=function(){for(var a=b(window),c=a.area,d=window;d!=window.top;){d=d.parent;var e=b(d);e.area<c&&(c=e.area,a=e)}return a},b=function(a){var b={width:1/0,height:1/0,area:1/0};return!isNaN(a.document.body.clientWidth)&&a.document.body.clientWidth>0&&(b.width=a.document.body.clientWidth),!isNaN(a.document.body.clientHeight)&&a.document.body.clientHeight>0&&(b.height=a.document.body.clientHeight),a.document.documentElement&&a.document.documentElement.clientWidth&&!isNaN(a.document.documentElement.clientWidth)&&(b.width=a.document.documentElement.clientWidth),a.document.documentElement&&a.document.documentElement.clientHeight&&!isNaN(a.document.documentElement.clientHeight)&&(b.height=a.document.documentElement.clientHeight),a.innerWidth&&!isNaN(a.innerWidth)&&(b.width=Math.min(b.width,a.innerWidth)),a.innerHeight&&!isNaN(a.innerHeight)&&(b.height=Math.min(b.height,a.innerHeight)),b.area=b.height*b.width,b},c=function a(b,c){var e=c,f=c.parent,g={width:0,height:0,left:0,right:0,top:0,bottom:0};if(b){var h=d(b,c);if(h.width=h.right-h.left,h.height=h.bottom-h.top,g=h,e!=f){var i=a(e.frameElement,f);i.bottom<g.bottom&&(i.bottom<g.top&&(g.top=i.bottom),g.bottom=i.bottom),i.right<g.right&&(i.right<g.left&&(g.left=i.right),g.right=i.right),g.width=g.right-g.left,g.height=g.bottom-g.top}}return g},d=function a(b,c){var d=c,e=c.parent,f={left:0,right:0,top:0,bottom:0};if(b){var g=b.getBoundingClientRect();d!=e&&(f=a(d.frameElement,e)),f={left:g.left+f.left,right:g.right+f.left,top:g.top+f.top,bottom:g.bottom+f.top}}return f}}b.exports=function(){var a=new d,b={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabiltyStatus:!1,duration:0};this.DEBUG_MODE=!1,this.checkViewability=function(a,d){var e=0,f=this,g=setInterval(function(){c(a)?e++:e=0,b.duration=100*e,e>=9&&(b.viewabiltyStatus=!0,f.DEBUG_MODE||clearInterval(g)),d(b)},100)};var c=function(a){var c=a.getBoundingClientRect(),d=c.width*c.height;return d>=242500&&(b.acceptedViewablePercentage=30),f(a)!==!0&&(g(a)!==!0&&(e(a),!(b.percentViewable&&b.percentViewable<b.acceptedViewablePercentage)&&!!b.percentViewable))},e=function(c){b.percentObscured=b.percentObscured||0;var d=a.getViewabilityState(c,window);return d.error||(b.percentViewable=d.percentViewable-b.percentObscured),d},f=function(a){var b=window.getComputedStyle(a,null),c=b.getPropertyValue("visibility"),d=b.getPropertyValue("display");return"hidden"==c||"none"==d},g=function(a){var c=a.getBoundingClientRect(),d=12,e=c.left+d,f=c.right-d,g=c.top+d,i=c.bottom-d,j=Math.floor(c.left+c.width/2),k=Math.floor(c.top+c.height/2),l=[{x:e,y:g},{x:j,y:g},{x:f,y:g},{x:e,y:k},{x:j,y:k},{x:f,y:k},{x:e,y:i},{x:j,y:i},{x:f,y:i}];for(var m in l)if(l[m]&&l[m].x>=0&&l[m].y>=0){var n=document.elementFromPoint(l[m].x,l[m].y);if(null!=n&&n!=a&&!a.contains(n)){var o=h(c,n.getBoundingClientRect());if(o>0&&(b.percentObscured=100*h(c,n.getBoundingClientRect()),b.percentObscured>b.acceptedViewablePercentage))return b.percentViewable=100-b.percentObscured,!0}}return!1},h=function(a,b){var c=a.width*a.height,d=Math.max(0,Math.min(a.right,b.right)-Math.max(a.left,b.left)),e=Math.max(0,Math.min(a.bottom,b.bottom)-Math.max(a.top,b.top));return d*e/c}}},{}],42:[function(a,b,c){"use strict";b.exports=function(b){if(!b.tracking)throw new Error("[Sensor Viewability] Missing required argument `tracking`.");if(!b.bus)throw new Error("[Sensor Viewability] Missing required argument `bus`.");if(!b.creative)throw new Error("[Sensor Viewability] Missing required argument `creative`.");if(!b.slot&&!b.videoSlot)throw new Error("[Sensor Viewability] Missing one of `slot` or `videoSlot` is required as an argument.");try{window.top.document.body}catch(a){return b.tracking.send({VIEWALL:-1})}try{var c=function a(c){c===b.creative&&i.checkViewability(g,function(c){c.duration<2e3||e||(i.DEBUG_MODE=!1,e=!0,b.tracking.send({VIEWALL:1}),b.bus.off(f.AD_PLAYED,a))})},d=function a(d){d===b.creative&&(i.DEBUG_MODE=!1,b.bus.off(f.FREE,a),b.bus.off(f.AD_PLAYED,c))};b.tracking.send({VIEWALL:0});var e=!1,f=a("bus/BusEvents"),g=b.videoSlot||b.slot,h=a("sensors/OpenAdViewability"),i=new h;i.DEBUG_MODE=!0,b.bus.on(f.AD_PLAYED,c),b.bus.on(f.FREE,d)}catch(a){return b.tracking.send({VIEWALL:2,DEBUGMSG:a.message||a})}}},{"bus/BusEvents":15,"sensors/OpenAdViewability":41}],43:[function(a,b,c){"use strict";function d(a){var b;b=a?a.split("."):[];for(var c=0;c<b.length;c++)b[c]=parseInt(b[c],10)||0;Object.defineProperties(this,{major:{get:function(){return b[0]||0}},minor:{get:function(){return b[1]||0}},patch:{get:function(){return b[2]||0}}}),this.compareVersion=function(a){return this.compareSemver(new d(a))}.bind(this),this.compareSemver=function(a){return this.major!==a.major?this.major-a.major:this.minor!==a.minor?this.minor-a.minor:this.patch!==a.patch?this.patch-a.patch:0}.bind(this)}b.exports=d},{}],44:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=[];void 0===b&&(b="&"),void 0===c&&(c="="),"function"!=typeof d&&(d=!1);
for(var f in a)d?e.push([d(f),d(a[f])].join(c)):e.push([f,a[f]].join(c));return e.join(b)}},{}],45:[function(a,b,c){"use strict";b.exports=function(){var a=Array.prototype.slice.call(arguments);if(0===a.length)return null;if(1===a.length)return a[0];var b=a[0];a.shift();for(var c=0;c<a.length;c++){var d=a[c];if(void 0!==d&&null!==d)for(var e in d)b[e]=d[e]}return b}},{}],46:[function(a,b,c){"use strict";b.exports=function(a,b){return"string"!=typeof b||"string"!=typeof a?b:b.substr(0,a.length)===a?b:/^http/.test(b)?b.replace(/https?:/,a):/^\/\//.test(b)?a+b:/^:/.test(b)?a+b.substr(1):a+"//"+b}},{}],47:[function(a,b,c){"use strict";function d(a){return void 0!==a&&null!==a&&e(a.top)&&e(a.right)&&e(a.bottom)&&e(a.left)}function e(a){return"number"==typeof a&&a===a}b.exports=function(a,b){var c,e;try{c=b.getBoundingClientRect(),e=b}catch(a){}try{c=a.getBoundingClientRect(),e=a}catch(a){}return d(c)?{width:c.right-c.left,height:c.bottom-c.top,top:c.top,right:c.right,bottom:c.bottom,left:c.left,owner:e}:null}},{}],48:[function(a,b,c){"use strict";var d=a("utils/parseDomain");b.exports=function(){try{var a=window.location.ancestorOrigins;if(a&&a.length){var b=a[a.length-1];return d(b)}}catch(a){}return""}},{"utils/parseDomain":52}],49:[function(a,b,c){"use strict";function d(a,b){if(!a)return a;void 0===b&&(b=0);var c=[];return(c=a.match(/^\/\/[^\/]*?yieldmanager\.com\/.*(?:url%3D%24|==,[^,]*),(https?%3A%2F%2F[^,]+)/i))&&c.length?d(unescape(c[1])):(c=a.match(/^\/\/[^\/]*?react2media\.com\/.*\|r=(http[^\|]+)/i))&&c.length?d(unescape(c[1])):(c=a.match(/(?:kw|refer(?:r?er)?|parentURL)=(https?%3A%2F%2F[^&\|]+)/i))&&c.length?d(unescape(c[1])):(c=a.match(/^\/\/[^\/]*?rubiconproject\.com\/.*?kw=([^&]+)/i))&&c.length?d(unescape(c[1])):(c=a.match(/^\/\/[^\/]*?akamaihd\.net\/.*?referer=([^&]+)/))&&c.length?d(unescape(c[1])):b<5?d(unescape(a),b+1):a}b.exports=function(a){var b=function(){try{var a=window.location.ancestorOrigins;return a[a.length-1]}catch(a){}return null}();return null!==b&&""!==b&&void 0!==b||(b=function(){return function a(b){try{if(parent&&null!==parent&&b!==parent)return a(parent)}catch(a){}return b.location.href}(window)}(),null!==b&&""!==b||(b=a),b=d(b)),b}},{}],50:[function(a,b,c){"use strict";b.exports=function a(b,c){var d;if(void 0===c&&(c=0),d=b.indexOf("?")>-1?b.split("?").shift():b,!d||c>50)return b;try{var e=decodeURIComponent(d)}catch(a){return b}if(d===e)return b;try{b=decodeURIComponent(b)}catch(a){return b}return a(b,++c)}},{}],51:[function(a,b,c){"use strict";b.exports=function(a){return"true"===a||"false"!==a&&(!isNaN(a)&&!!parseInt(a,10))}},{}],52:[function(a,b,c){"use strict";b.exports=function(a){if(void 0===a||null===a||""===a)return"";a=""+a;for(var b=unescape(a);b!==a;b=unescape(b))a=b;var c=a.replace(/^(https?:)?(\/\/)?/,"").replace(/[\/?#].*$/,"");return/^[a-zA-Z0-9.-]+$/.test(c)?c:""}},{}],53:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){void 0===b&&(b="&"),void 0===c&&(c="="),"function"!=typeof d&&(d=!1);for(var e,f={},g=a.split(b),h=0;h<g.length;h++)e=g[h],""!==e&&(e=e.split(c),e.length<2||(d?f[d(e[0])]=d(e[1]):f[e[0]]=e[1]));return f}},{}],54:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d]]=b[a[d]];return c}},{}],55:[function(a,b,c){"use strict";var d=a("bluebird");b.exports=function(){var a={};return a.promise=new d(function(b,c){a.resolve=b,a.reject=c}),a}},{bluebird:1}],56:[function(a,b,c){"use strict";var d=a("browser-request").get,e=a("bluebird");b.exports=e.promisify(d,{multiArgs:!0})},{bluebird:1,"browser-request":2}],57:[function(a,b,c){"use strict";b.exports={encode:function(a){return void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),"pse1"===a.substr(0,4)?a:/[^a-wA-Z0-9]/g.test(a)?"pse1"+a.replace(/[^a-wA-Z0-9]/g,function(){var a=arguments[0]+"",b=a.charCodeAt().toString(16);return"xxyz".substr(Math.log(a.charCodeAt())/Math.log(16),1)+("00".substr(b.length)+b)}):a)},decode:function(a){return void 0===a||null===a?a:"pse1"!==a.substr(0,4)?a:a.substr(4).replace(/x([0-9a-fA-F]{2})|y([0-9a-fA-F]{3})|z([0-9a-fA-F]{4})/g,function(){return String.fromCharCode(parseInt(arguments[1]||arguments[2]||arguments[3],16))})}}},{}],58:[function(a,b,c){"use strict";function d(a){var b=Math.floor(j.random()*a.length);return a.charAt(b)}function e(a,b,c){for(var d=[],e=Math.max(a.length,b.length),f=0,g=0;g<e||f;){var h=g<a.length?a[g]:0,i=g<b.length?b[g]:0,j=f+h+i;d.push(j%c),f=Math.floor(j/c),g++}return d}function f(a,b,c){if(a<0)return null;if(0==a)return[];for(var d=[],f=b;;){if(1&a&&(d=e(d,f,c)),a>>=1,0===a)break;f=e(f,f,c)}return d}function g(a,b,c){for(var d=a.split(""),g=[],h=d.length-1;h>=0;h--){var i=parseInt(d[h],b);if(isNaN(i))return null;g.push(i)}d=g;for(var j=[],k=[1],h=0;h<d.length;h++)d[h]&&(j=e(j,f(d[h],k,c),c)),k=f(b,k,c);for(var l="",h=j.length-1;h>=0;h--)l+=j[h].toString(c);return l}function h(a){return"0x"===a.substring(0,2)&&(a=a.substring(2)),a=a.toLowerCase(),g(a,16,10)}var i=a("mersennetwister"),j=new i;b.exports=function(){for(var a=[],b="0123456789abcdef",c="01234567",e=0;e<15;e++)a.push(d(b));return a.unshift(d(c)),h(a.join(""))}},{mersennetwister:4}],59:[function(a,b,c){"use strict";b.exports=function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}},{}],60:[function(a,b,c){"use strict";b.exports=function(a){a||(a=document);var b=a.documentElement,c=a.defaultView;return{width:b.clientWidth||c.innerWidth,height:b.clientHeight||c.innerHeight}}},{}],61:[function(a,b,c){"use strict";var d=a("model/VPAIDController"),e=new d;window.getVPAIDAd=function(){return e}},{"model/VPAIDController":35}]},{},[61]);